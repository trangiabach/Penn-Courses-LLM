{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/cookie.js"],"sourcesContent":["var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SessionStore_instances, _SessionStore_chunks, _SessionStore_option, _SessionStore_logger, _SessionStore_chunk, _SessionStore_clean;\n// Uncomment to recalculate the estimated size\n// of an empty session cookie\n// import { serialize } from \"cookie\"\n// console.log(\n//   \"Cookie estimated to be \",\n//   serialize(`__Secure.authjs.session-token.0`, \"\", {\n//     expires: new Date(),\n//     httpOnly: true,\n//     maxAge: Number.MAX_SAFE_INTEGER,\n//     path: \"/\",\n//     sameSite: \"strict\",\n//     secure: true,\n//     domain: \"example.com\",\n//   }).length,\n//   \" bytes\"\n// )\nconst ALLOWED_COOKIE_SIZE = 4096;\n// Based on commented out section above\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 160;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n * Use secure cookies if the site uses HTTPS\n * This being conditional allows cookies to work non-HTTPS development URLs\n * Honour secure cookie option, which sets 'secure' and also adds '__Secure-'\n * prefix, but enable them by default if the site URL is HTTPS; but not for\n * non-HTTPS URLs like http://localhost which are used in development).\n * For more on prefixes see https://googlechrome.github.io/samples/cookie-prefixes/\n *\n * @TODO Review cookie settings (names, options)\n */\nexport function defaultCookies(useSecureCookies) {\n    const cookiePrefix = useSecureCookies ? \"__Secure-\" : \"\";\n    return {\n        // default cookie options\n        sessionToken: {\n            name: `${cookiePrefix}authjs.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        callbackUrl: {\n            name: `${cookiePrefix}authjs.callback-url`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        csrfToken: {\n            // Default to __Host- for CSRF token for additional protection if using useSecureCookies\n            // NB: The `__Host-` prefix is stricter than the `__Secure-` prefix.\n            name: `${useSecureCookies ? \"__Host-\" : \"\"}authjs.csrf-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        pkceCodeVerifier: {\n            name: `${cookiePrefix}authjs.pkce.code_verifier`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        state: {\n            name: `${cookiePrefix}authjs.state`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        nonce: {\n            name: `${cookiePrefix}authjs.nonce`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n    };\n}\nexport class SessionStore {\n    constructor(option, cookies, logger) {\n        _SessionStore_instances.add(this);\n        _SessionStore_chunks.set(this, {});\n        _SessionStore_option.set(this, void 0);\n        _SessionStore_logger.set(this, void 0);\n        __classPrivateFieldSet(this, _SessionStore_logger, logger, \"f\");\n        __classPrivateFieldSet(this, _SessionStore_option, option, \"f\");\n        if (!cookies)\n            return;\n        const { name: sessionCookiePrefix } = option;\n        for (const [name, value] of Object.entries(cookies)) {\n            if (!name.startsWith(sessionCookiePrefix) || !value)\n                continue;\n            __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n        }\n    }\n    /**\n     * The JWT Session or database Session ID\n     * constructed from the cookie chunks.\n     */\n    get value() {\n        // Sort the chunks by their keys before joining\n        const sortedKeys = Object.keys(__classPrivateFieldGet(this, _SessionStore_chunks, \"f\")).sort((a, b) => {\n            const aSuffix = parseInt(a.split(\".\").pop() || \"0\");\n            const bSuffix = parseInt(b.split(\".\").pop() || \"0\");\n            return aSuffix - bSuffix;\n        });\n        // Use the sorted keys to join the chunks in the correct order\n        return sortedKeys.map((key) => __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[key]).join(\"\");\n    }\n    /**\n     * Given a cookie value, return new cookies, chunked, to fit the allowed cookie size.\n     * If the cookie has changed from chunked to unchunked or vice versa,\n     * it deletes the old cookies as well.\n     */\n    chunk(value, options) {\n        // Assume all cookies should be cleaned by default\n        const cookies = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this);\n        // Calculate new chunks\n        const chunked = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_chunk).call(this, {\n            name: __classPrivateFieldGet(this, _SessionStore_option, \"f\").name,\n            value,\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, ...options },\n        });\n        // Update stored chunks / cookies\n        for (const chunk of chunked) {\n            cookies[chunk.name] = chunk;\n        }\n        return Object.values(cookies);\n    }\n    /** Returns a list of cookies that should be cleaned. */\n    clean() {\n        return Object.values(__classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this));\n    }\n}\n_SessionStore_chunks = new WeakMap(), _SessionStore_option = new WeakMap(), _SessionStore_logger = new WeakMap(), _SessionStore_instances = new WeakSet(), _SessionStore_chunk = function _SessionStore_chunk(cookie) {\n    const chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n    if (chunkCount === 1) {\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[cookie.name] = cookie.value;\n        return [cookie];\n    }\n    const cookies = [];\n    for (let i = 0; i < chunkCount; i++) {\n        const name = `${cookie.name}.${i}`;\n        const value = cookie.value.substr(i * CHUNK_SIZE, CHUNK_SIZE);\n        cookies.push({ ...cookie, name, value });\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n    }\n    __classPrivateFieldGet(this, _SessionStore_logger, \"f\").debug(\"CHUNKING_SESSION_COOKIE\", {\n        message: `Session cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n        emptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n        valueSize: cookie.value.length,\n        chunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE),\n    });\n    return cookies;\n}, _SessionStore_clean = function _SessionStore_clean() {\n    const cleanedChunks = {};\n    for (const name in __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")) {\n        delete __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")?.[name];\n        cleanedChunks[name] = {\n            name,\n            value: \"\",\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, maxAge: 0 },\n        };\n    }\n    return cleanedChunks;\n};\n"],"names":[],"mappings":";;;;AAAA,IAAI,yBAAyB,AAAC,IAAI,IAAI,IAAI,CAAC,sBAAsB,IAAK,SAAU,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;IAC3G,IAAI,SAAS,KAAK,MAAM,IAAI,UAAU;IACtC,IAAI,SAAS,OAAO,CAAC,GAAG,MAAM,IAAI,UAAU;IAC5C,IAAI,OAAO,UAAU,aAAa,aAAa,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,WAAW,MAAM,IAAI,UAAU;IACvG,OAAO,AAAC,SAAS,MAAM,EAAE,IAAI,CAAC,UAAU,SAAS,IAAI,EAAE,KAAK,GAAG,QAAQ,MAAM,GAAG,CAAC,UAAU,QAAS;AACxG;AACA,IAAI,yBAAyB,AAAC,IAAI,IAAI,IAAI,CAAC,sBAAsB,IAAK,SAAU,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;IACpG,IAAI,SAAS,OAAO,CAAC,GAAG,MAAM,IAAI,UAAU;IAC5C,IAAI,OAAO,UAAU,aAAa,aAAa,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,WAAW,MAAM,IAAI,UAAU;IACvG,OAAO,SAAS,MAAM,IAAI,SAAS,MAAM,EAAE,IAAI,CAAC,YAAY,IAAI,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC;AACxF;AACA,IAAI,yBAAyB,sBAAsB,sBAAsB,sBAAsB,qBAAqB;AACpH,8CAA8C;AAC9C,6BAA6B;AAC7B,qCAAqC;AACrC,eAAe;AACf,+BAA+B;AAC/B,uDAAuD;AACvD,2BAA2B;AAC3B,sBAAsB;AACtB,uCAAuC;AACvC,iBAAiB;AACjB,0BAA0B;AAC1B,oBAAoB;AACpB,6BAA6B;AAC7B,eAAe;AACf,aAAa;AACb,IAAI;AACJ,MAAM,sBAAsB;AAC5B,uCAAuC;AACvC,MAAM,8BAA8B;AACpC,MAAM,aAAa,sBAAsB;AAWlC,SAAS,eAAe,gBAAgB;IAC3C,MAAM,eAAe,mBAAmB,cAAc;IACtD,OAAO;QACH,yBAAyB;QACzB,cAAc;YACV,MAAM,CAAC,EAAE,aAAa,oBAAoB,CAAC;YAC3C,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;YACZ;QACJ;QACA,aAAa;YACT,MAAM,CAAC,EAAE,aAAa,mBAAmB,CAAC;YAC1C,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;YACZ;QACJ;QACA,WAAW;YACP,wFAAwF;YACxF,oEAAoE;YACpE,MAAM,CAAC,EAAE,mBAAmB,YAAY,GAAG,iBAAiB,CAAC;YAC7D,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;YACZ;QACJ;QACA,kBAAkB;YACd,MAAM,CAAC,EAAE,aAAa,yBAAyB,CAAC;YAChD,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;gBACR,QAAQ,KAAK;YACjB;QACJ;QACA,OAAO;YACH,MAAM,CAAC,EAAE,aAAa,YAAY,CAAC;YACnC,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;gBACR,QAAQ,KAAK;YACjB;QACJ;QACA,OAAO;YACH,MAAM,CAAC,EAAE,aAAa,YAAY,CAAC;YACnC,SAAS;gBACL,UAAU;gBACV,UAAU;gBACV,MAAM;gBACN,QAAQ;YACZ;QACJ;IACJ;AACJ;AACO,MAAM;IACT,YAAY,MAAM,EAAE,OAAO,EAAE,MAAM,CAAE;QACjC,wBAAwB,GAAG,CAAC,IAAI;QAChC,qBAAqB,GAAG,CAAC,IAAI,EAAE,CAAC;QAChC,qBAAqB,GAAG,CAAC,IAAI,EAAE,KAAK;QACpC,qBAAqB,GAAG,CAAC,IAAI,EAAE,KAAK;QACpC,uBAAuB,IAAI,EAAE,sBAAsB,QAAQ;QAC3D,uBAAuB,IAAI,EAAE,sBAAsB,QAAQ;QAC3D,IAAI,CAAC,SACD;QACJ,MAAM,EAAE,MAAM,mBAAmB,EAAE,GAAG;QACtC,KAAK,MAAM,CAAC,MAAM,MAAM,IAAI,OAAO,OAAO,CAAC,SAAU;YACjD,IAAI,CAAC,KAAK,UAAU,CAAC,wBAAwB,CAAC,OAC1C;YACJ,uBAAuB,IAAI,EAAE,sBAAsB,IAAI,CAAC,KAAK,GAAG;QACpE;IACJ;IACA;;;KAGC,GACD,IAAI,QAAQ;QACR,+CAA+C;QAC/C,MAAM,aAAa,OAAO,IAAI,CAAC,uBAAuB,IAAI,EAAE,sBAAsB,MAAM,IAAI,CAAC,CAAC,GAAG;YAC7F,MAAM,UAAU,SAAS,EAAE,KAAK,CAAC,KAAK,GAAG,MAAM;YAC/C,MAAM,UAAU,SAAS,EAAE,KAAK,CAAC,KAAK,GAAG,MAAM;YAC/C,OAAO,UAAU;QACrB;QACA,8DAA8D;QAC9D,OAAO,WAAW,GAAG,CAAC,CAAC,MAAQ,uBAAuB,IAAI,EAAE,sBAAsB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;IACtG;IACA;;;;KAIC,GACD,MAAM,KAAK,EAAE,OAAO,EAAE;QAClB,kDAAkD;QAClD,MAAM,UAAU,uBAAuB,IAAI,EAAE,yBAAyB,KAAK,qBAAqB,IAAI,CAAC,IAAI;QACzG,uBAAuB;QACvB,MAAM,UAAU,uBAAuB,IAAI,EAAE,yBAAyB,KAAK,qBAAqB,IAAI,CAAC,IAAI,EAAE;YACvG,MAAM,uBAAuB,IAAI,EAAE,sBAAsB,KAAK,IAAI;YAClE;YACA,SAAS;gBAAE,GAAG,uBAAuB,IAAI,EAAE,sBAAsB,KAAK,OAAO;gBAAE,GAAG,OAAO;YAAC;QAC9F;QACA,iCAAiC;QACjC,KAAK,MAAM,SAAS,QAAS;YACzB,OAAO,CAAC,MAAM,IAAI,CAAC,GAAG;QAC1B;QACA,OAAO,OAAO,MAAM,CAAC;IACzB;IACA,sDAAsD,GACtD,QAAQ;QACJ,OAAO,OAAO,MAAM,CAAC,uBAAuB,IAAI,EAAE,yBAAyB,KAAK,qBAAqB,IAAI,CAAC,IAAI;IAClH;AACJ;AACA,uBAAuB,IAAI,WAAW,uBAAuB,IAAI,WAAW,uBAAuB,IAAI,WAAW,0BAA0B,IAAI,WAAW,sBAAsB,SAAS,oBAAoB,MAAM;IAChN,MAAM,aAAa,KAAK,IAAI,CAAC,OAAO,KAAK,CAAC,MAAM,GAAG;IACnD,IAAI,eAAe,GAAG;QAClB,uBAAuB,IAAI,EAAE,sBAAsB,IAAI,CAAC,OAAO,IAAI,CAAC,GAAG,OAAO,KAAK;QACnF,OAAO;YAAC;SAAO;IACnB;IACA,MAAM,UAAU,EAAE;IAClB,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;QACjC,MAAM,OAAO,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC;QAClC,MAAM,QAAQ,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,YAAY;QAClD,QAAQ,IAAI,CAAC;YAAE,GAAG,MAAM;YAAE;YAAM;QAAM;QACtC,uBAAuB,IAAI,EAAE,sBAAsB,IAAI,CAAC,KAAK,GAAG;IACpE;IACA,uBAAuB,IAAI,EAAE,sBAAsB,KAAK,KAAK,CAAC,2BAA2B;QACrF,SAAS,CAAC,+BAA+B,EAAE,oBAAoB,OAAO,CAAC;QACvE,iBAAiB;QACjB,WAAW,OAAO,KAAK,CAAC,MAAM;QAC9B,QAAQ,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK,CAAC,MAAM,GAAG;IAChD;IACA,OAAO;AACX,GAAG,sBAAsB,SAAS;IAC9B,MAAM,gBAAgB,CAAC;IACvB,IAAK,MAAM,QAAQ,uBAAuB,IAAI,EAAE,sBAAsB,KAAM;QACxE,OAAO,uBAAuB,IAAI,EAAE,sBAAsB,MAAM,CAAC,KAAK;QACtE,aAAa,CAAC,KAAK,GAAG;YAClB;YACA,OAAO;YACP,SAAS;gBAAE,GAAG,uBAAuB,IAAI,EAAE,sBAAsB,KAAK,OAAO;gBAAE,QAAQ;YAAE;QAC7F;IACJ;IACA,OAAO;AACX"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/errors.js"],"sourcesContent":["/**\n * Base error class for all Auth.js errors.\n * It's optimized to be printed in the server logs in a nicely formatted way\n * via the [`logger.error`](https://authjs.dev/reference/core#logger) option.\n */\nexport class AuthError extends Error {\n    constructor(message, errorOptions) {\n        if (message instanceof Error) {\n            super(undefined, {\n                cause: { err: message, ...message.cause, ...errorOptions },\n            });\n        }\n        else if (typeof message === \"string\") {\n            if (errorOptions instanceof Error) {\n                errorOptions = { err: errorOptions, ...errorOptions.cause };\n            }\n            super(message, errorOptions);\n        }\n        else {\n            super(undefined, message);\n        }\n        this.name = this.constructor.name;\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.type = this.constructor.type ?? \"AuthError\";\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.kind = this.constructor.kind ?? \"error\";\n        Error.captureStackTrace?.(this, this.constructor);\n        const url = `https://errors.authjs.dev#${this.type.toLowerCase()}`;\n        this.message += `${this.message ? \" .\" : \"\"}Read more at ${url}`;\n    }\n}\nexport class SignInError extends AuthError {\n}\nSignInError.kind = \"signIn\";\n/**\n * One of the database [`Adapter` methods](https://auithjs.dev/reference/core/adapters#methods)\n * failed during execution.\n *\n * :::tip\n * If `debug: true` is set, you can check out `[auth][debug]` in the logs to learn more about the failed adapter method execution.\n * @example\n * ```sh\n * [auth][debug]: adapter_getUserByEmail\n * { \"args\": [undefined] }\n * ```\n * :::\n */\nexport class AdapterError extends AuthError {\n}\nAdapterError.type = \"AdapterError\";\n/**\n * Thrown when the execution of the [`signIn` callback](https://authjs.dev/reference/core/types#signin) fails\n * or if it returns `false`.\n */\nexport class AuthorizedCallbackError extends AuthError {\n}\nAuthorizedCallbackError.type = \"AuthorizedCallbackError\";\n/**\n * This error occurs when the user cannot finish login.\n * Depending on the provider type, this could have happened for multiple reasons.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n *\n * For an [OAuth provider](https://authjs.dev/reference/core/providers/oauth), possible causes are:\n * - The user denied access to the application\n * - There was an error parsing the OAuth Profile:\n *   Check out the provider's `profile` or `userinfo.request` method to make sure\n *   it correctly fetches the user's profile.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * For an [Email provider](https://authjs.dev/reference/core/providers/email), possible causes are:\n * - The provided email/token combination was invalid/missing:\n *   Check if the provider's `sendVerificationRequest` method correctly sends the email.\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n *\n * For a [Credentials provider](https://authjs.dev/reference/core/providers/credentials), possible causes are:\n * - The `authorize` method threw an uncaught error:\n *   Check the provider's `authorize` method.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * :::tip\n * Check out `[auth][cause]` in the error message for more details.\n * It will show the original stack trace.\n * :::\n */\nexport class CallbackRouteError extends AuthError {\n}\nCallbackRouteError.type = \"CallbackRouteError\";\n/**\n * Thrown when Auth.js is misconfigured and accidentally tried to require authentication on a custom error page.\n * To prevent an infinite loop, Auth.js will instead render its default error page.\n *\n * To fix this, make sure that the `error` page does not require authentication.\n *\n * Learn more at [Guide: Error pages](https://authjs.dev/guides/basics/pages)\n */\nexport class ErrorPageLoop extends AuthError {\n}\nErrorPageLoop.type = \"ErrorPageLoop\";\n/**\n * One of the [`events` methods](https://authjs.dev/reference/core/types#eventcallbacks)\n * failed during execution.\n *\n * Make sure that the `events` methods are implemented correctly and uncaught errors are handled.\n *\n * Learn more at [`events`](https://authjs.dev/reference/core/types#eventcallbacks)\n */\nexport class EventError extends AuthError {\n}\nEventError.type = \"EventError\";\n/**\n * Thrown when Auth.js is unable to verify a `callbackUrl` value.\n * The browser either disabled cookies or the `callbackUrl` is not a valid URL.\n *\n * Somebody might have tried to manipulate the callback URL that Auth.js uses to redirect the user back to the configured `callbackUrl`/page.\n * This could be a malicious hacker trying to redirect the user to a phishing site.\n * To prevent this, Auth.js checks if the callback URL is valid and throws this error if it is not.\n *\n * There is no action required, but it might be an indicator that somebody is trying to attack your application.\n */\nexport class InvalidCallbackUrl extends AuthError {\n}\nInvalidCallbackUrl.type = \"InvalidCallbackUrl\";\n/**\n * The `authorize` callback returned `null` in the [Credentials provider](https://authjs.dev/getting-started/providers/credentials-tutorial).\n * We don't recommend providing information about which part of the credentials were wrong, as it might be abused by malicious hackers.\n */\nexport class CredentialsSignin extends SignInError {\n}\nCredentialsSignin.type = \"CredentialsSignin\";\n/**\n * One of the configured OAuth or OIDC providers is missing the `authorization`, `token` or `userinfo`, or `issuer` configuration.\n * To perform OAuth or OIDC sign in, at least one of these endpoints is required.\n *\n * Learn more at [`OAuth2Config`](https://authjs.dev/reference/core/providers#oauth2configprofile) or [Guide: OAuth Provider](https://authjs.dev/guides/providers/custom-provider)\n */\nexport class InvalidEndpoints extends AuthError {\n}\nInvalidEndpoints.type = \"InvalidEndpoints\";\n/**\n * Thrown when a PKCE, state or nonce OAuth check could not be performed.\n * This could happen if the OAuth provider is configured incorrectly or if the browser is blocking cookies.\n *\n * Learn more at [`checks`](https://authjs.dev/reference/core/providers#checks)\n */\nexport class InvalidCheck extends AuthError {\n}\nInvalidCheck.type = \"InvalidCheck\";\n/**\n * Logged on the server when Auth.js could not decode or encode a JWT-based (`strategy: \"jwt\"`) session.\n *\n * Possible causes are either a misconfigured `secret` or a malformed JWT or `encode/decode` methods.\n *\n * :::note\n * When this error is logged, the session cookie is destroyed.\n * :::\n *\n * Learn more at [`secret`](https://authjs.dev/reference/core#secret), [`jwt.encode`](https://authjs.dev/reference/core/jwt#encode) or [`jwt.decode`](https://authjs.dev/reference/core/jwt#decode) for more information.\n */\nexport class JWTSessionError extends AuthError {\n}\nJWTSessionError.type = \"JWTSessionError\";\n/**\n * Thrown if Auth.js is misonfigured. This could happen if you configured an Email provider but did not set up a database adapter,\n * or tried using a `strategy: \"database\"` session without a database adapter.\n * In both cases, make sure you either remove the configuration or add the missing adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/adapters), [Email provider](https://authjs.dev/reference/core/providers/email) or [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database)\n */\nexport class MissingAdapter extends AuthError {\n}\nMissingAdapter.type = \"MissingAdapter\";\n/**\n * Thrown similarily to [`MissingAdapter`](https://authjs.dev/reference/core/errors#missingadapter), but only some required methods were missing.\n *\n * Make sure you either remove the configuration or add the missing methods to the adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/reference/core/adapters)\n */\nexport class MissingAdapterMethods extends AuthError {\n}\nMissingAdapterMethods.type = \"MissingAdapterMethods\";\n/**\n * Thrown when a Credentials provider is missing the `authorize` configuration.\n * To perform credentials sign in, the `authorize` method is required.\n *\n * Learn more at [Credentials provider](https://authjs.dev/reference/core/providers/credentials)\n */\nexport class MissingAuthorize extends AuthError {\n}\nMissingAuthorize.type = \"MissingAuthorize\";\n/**\n * Auth.js requires a secret to be set, but none was not found. This is used to encrypt cookies, JWTs and other sensitive data.\n *\n * :::note\n * If you are using a framework like Next.js, we try to automatically infer the secret from the `AUTH_SECRET` environment variable.\n * Alternatively, you can also explicitly set the [`AuthConfig.secret`](https://authjs.dev/reference/core#secret).\n * :::\n *\n *\n * :::tip\n * You can generate a good secret value:\n *  - On Unix systems: type `openssl rand -hex 32` in the terminal\n *  - Or generate one [online](https://generate-secret.vercel.app/32)\n *\n * :::\n */\nexport class MissingSecret extends AuthError {\n}\nMissingSecret.type = \"MissingSecret\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an OAuth account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link OAuth accounts to existing accounts if the user is not signed in.\n *\n * :::tip\n * If you trust the OAuth provider to have verified the user's email address,\n * you can enable automatic account linking by setting [`allowDangerousEmailAccountLinking: true`](https://authjs.dev/reference/core/providers#allowdangerousemailaccountlinking)\n * in the provider configuration.\n * :::\n */\nexport class OAuthAccountNotLinked extends SignInError {\n}\nOAuthAccountNotLinked.type = \"OAuthAccountNotLinked\";\n/**\n * Thrown when an OAuth provider returns an error during the sign in process.\n * This could happen for example if the user denied access to the application or there was a configuration error.\n *\n * For a full list of possible reasons, check out the specification [Authorization Code Grant: Error Response](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.2.1)\n */\nexport class OAuthCallbackError extends SignInError {\n}\nOAuthCallbackError.type = \"OAuthCallbackError\";\n/**\n * This error occurs during an OAuth sign in attempt when the provdier's\n * response could not be parsed. This could for example happen if the provider's API\n * changed, or the [`OAuth2Config.profile`](https://authjs.dev/reference/core/providers/oauth#profile) method is not implemented correctly.\n */\nexport class OAuthProfileParseError extends AuthError {\n}\nOAuthProfileParseError.type = \"OAuthProfileParseError\";\n/**\n * Logged on the server when Auth.js could not retrieve a session from the database (`strategy: \"database\"`).\n *\n * The database adapter might be misconfigured or the database is not reachable.\n *\n * Learn more at [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database)\n */\nexport class SessionTokenError extends AuthError {\n}\nSessionTokenError.type = \"SessionTokenError\";\n/**\n * Happens when login by [OAuth](https://authjs.dev/getting-started/providers/oauth-tutorial) could not be started.\n *\n * Possible causes are:\n * - The Authorization Server is not compliant with the [OAuth 2.0](https://www.ietf.org/rfc/rfc6749.html) or the [OIDC](https://openid.net/specs/openid-connect-core-1_0.html) specification.\n *   Check the details in the error message.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n */\nexport class OAuthSignInError extends SignInError {\n}\nOAuthSignInError.type = \"OAuthSignInError\";\n/**\n * Happens when the login by an [Email provider](https://authjs.dev/getting-started/providers/email-tutorial) could not be started.\n *\n * Possible causes are:\n * - The email sent from the client is invalid, could not be normalized by [`EmailConfig.normalizeIdentifier`](https://authjs.dev/reference/core/providers/email#normalizeidentifier)\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n */\nexport class EmailSignInError extends SignInError {\n}\nEmailSignInError.type = \"EmailSignInError\";\n/**\n * Represents an error that occurs during the sign-out process. This error\n * is logged when there are issues in terminating a user's session, either\n * by failing to delete the session from the database (in database session\n * strategies) or encountering issues during other parts of the sign-out\n * process, such as emitting sign-out events or clearing session cookies.\n *\n * The session cookie(s) are emptied even if this error is logged.\n *\n */\nexport class SignOutError extends AuthError {\n}\nSignOutError.type = \"SignOutError\";\n/**\n * Auth.js was requested to handle an operation that it does not support.\n *\n * See [`AuthAction`](https://authjs.dev/reference/core/types#authaction) for the supported actions.\n */\nexport class UnknownAction extends AuthError {\n}\nUnknownAction.type = \"UnknownAction\";\n/**\n * Thrown when a Credentials provider is present but the JWT strategy (`strategy: \"jwt\"`) is not enabled.\n *\n * Learn more at [`strategy`](https://authjs.dev/reference/core#strategy) or [Credentials provider](https://authjs.dev/reference/core/providers/credentials)\n */\nexport class UnsupportedStrategy extends AuthError {\n}\nUnsupportedStrategy.type = \"UnsupportedStrategy\";\n/** Thrown when the callback endpoint was incorrectly called without a provider. */\nexport class InvalidProvider extends AuthError {\n}\nInvalidProvider.type = \"InvalidProvider\";\n/**\n * Thrown when the `trustHost` option was not set to `true`.\n *\n * Auth.js requires the `trustHost` option to be set to `true` since it's relying on the request headers' `host` value.\n *\n * :::note\n * Official Auth.js libraries might attempt to automatically set the `trustHost` option to `true` if the request is coming from a trusted host on a trusted platform.\n * :::\n *\n * Learn more at [`trustHost`](https://authjs.dev/reference/core#trusthost) or [Guide: Deployment](https://authjs.dev/getting-started/deployment)\n */\nexport class UntrustedHost extends AuthError {\n}\nUntrustedHost.type = \"UntrustedHost\";\n/**\n * The user's email/token combination was invalid.\n * This could be because the email/token combination was not found in the database,\n * or because the token has expired. Ask the user to log in again.\n */\nexport class Verification extends AuthError {\n}\nVerification.type = \"Verification\";\n/**\n * Error for missing CSRF tokens in client-side actions (`signIn`, `signOut`, `useSession#update`).\n * Thrown when actions lack the double submit cookie, essential for CSRF protection.\n *\n * CSRF ([Cross-Site Request Forgery](https://owasp.org/www-community/attacks/csrf))\n * is an attack leveraging authenticated user credentials for unauthorized actions.\n *\n * Double submit cookie pattern, a CSRF defense, requires matching values in a cookie\n * and request parameter. More on this at [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/Security/CSRF).\n */\nexport class MissingCSRF extends SignInError {\n}\nMissingCSRF.type = \"MissingCSRF\";\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/assert.js"],"sourcesContent":["import { defaultCookies } from \"./cookie.js\";\nimport { InvalidCallbackUrl, InvalidEndpoints, MissingAdapter, MissingAdapterMethods, MissingAuthorize, MissingSecret, UnsupportedStrategy, UntrustedHost, } from \"../../errors.js\";\nlet warned = false;\nfunction isValidHttpUrl(url, baseUrl) {\n    try {\n        return /^https?:/.test(new URL(url, url.startsWith(\"/\") ? baseUrl : undefined).protocol);\n    }\n    catch {\n        return false;\n    }\n}\nlet hasCredentials = false;\nlet hasEmail = false;\nconst emailMethods = [\n    \"createVerificationToken\",\n    \"useVerificationToken\",\n    \"getUserByEmail\",\n];\nconst sessionMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"getUserByEmail\",\n    \"getUserByAccount\",\n    \"updateUser\",\n    \"linkAccount\",\n    \"createSession\",\n    \"getSessionAndUser\",\n    \"updateSession\",\n    \"deleteSession\",\n];\n/**\n * Verify that the user configured Auth.js correctly.\n * Good place to mention deprecations as well.\n *\n * This is invoked before the init method, so default values are not available yet.\n */\nexport function assertConfig(request, options) {\n    const { url } = request;\n    const warnings = [];\n    if (!warned && options.debug)\n        warnings.push(\"debug-enabled\");\n    if (!options.trustHost) {\n        return new UntrustedHost(`Host must be trusted. URL was: ${request.url}`);\n    }\n    if (!options.secret) {\n        return new MissingSecret(\"Please define a `secret`.\");\n    }\n    const callbackUrlParam = request.query?.callbackUrl;\n    if (callbackUrlParam && !isValidHttpUrl(callbackUrlParam, url.origin)) {\n        return new InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlParam}`);\n    }\n    const { callbackUrl: defaultCallbackUrl } = defaultCookies(options.useSecureCookies ?? url.protocol === \"https:\");\n    const callbackUrlCookie = request.cookies?.[options.cookies?.callbackUrl?.name ?? defaultCallbackUrl.name];\n    if (callbackUrlCookie && !isValidHttpUrl(callbackUrlCookie, url.origin)) {\n        return new InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlCookie}`);\n    }\n    for (const p of options.providers) {\n        const provider = typeof p === \"function\" ? p() : p;\n        if ((provider.type === \"oauth\" || provider.type === \"oidc\") &&\n            !(provider.issuer ?? provider.options?.issuer)) {\n            const { authorization: a, token: t, userinfo: u } = provider;\n            let key;\n            if (typeof a !== \"string\" && !a?.url)\n                key = \"authorization\";\n            else if (typeof t !== \"string\" && !t?.url)\n                key = \"token\";\n            else if (typeof u !== \"string\" && !u?.url)\n                key = \"userinfo\";\n            if (key) {\n                return new InvalidEndpoints(`Provider \"${provider.id}\" is missing both \\`issuer\\` and \\`${key}\\` endpoint config. At least one of them is required.`);\n            }\n        }\n        if (provider.type === \"credentials\")\n            hasCredentials = true;\n        else if (provider.type === \"email\")\n            hasEmail = true;\n    }\n    if (hasCredentials) {\n        const dbStrategy = options.session?.strategy === \"database\";\n        const onlyCredentials = !options.providers.some((p) => (typeof p === \"function\" ? p() : p).type !== \"credentials\");\n        if (dbStrategy && onlyCredentials) {\n            return new UnsupportedStrategy(\"Signing in with credentials only supported if JWT strategy is enabled\");\n        }\n        const credentialsNoAuthorize = options.providers.some((p) => {\n            const provider = typeof p === \"function\" ? p() : p;\n            return provider.type === \"credentials\" && !provider.authorize;\n        });\n        if (credentialsNoAuthorize) {\n            return new MissingAuthorize(\"Must define an authorize() handler to use credentials authentication provider\");\n        }\n    }\n    const { adapter, session } = options;\n    if (hasEmail ||\n        session?.strategy === \"database\" ||\n        (!session?.strategy && adapter)) {\n        let methods;\n        if (hasEmail) {\n            if (!adapter)\n                return new MissingAdapter(\"Email login requires an adapter.\");\n            methods = emailMethods;\n        }\n        else {\n            if (!adapter)\n                return new MissingAdapter(\"Database session requires an adapter.\");\n            methods = sessionMethods;\n        }\n        const missing = methods.filter((m) => !adapter[m]);\n        if (missing.length) {\n            return new MissingAdapterMethods(`Required adapter methods were missing: ${missing.join(\", \")}`);\n        }\n    }\n    if (!warned)\n        warned = true;\n    return warnings;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/jwt.js"],"sourcesContent":["/**\n *\n *\n * This module contains functions and types\n * to encode and decode {@link https://authjs.dev/concepts/session-strategies#jwt JWT}s\n * issued and used by Auth.js.\n *\n * The JWT issued by Auth.js is _encrypted by default_, using the _A256GCM_ algorithm ({@link https://www.rfc-editor.org/rfc/rfc7516 JWE}).\n * It uses the `AUTH_SECRET` environment variable to derive a sufficient encryption key.\n *\n * :::info Note\n * Auth.js JWTs are meant to be used by the same app that issued them.\n * If you need JWT authentication for your third-party API, you should rely on your Identity Provider instead.\n * :::\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * You can then import this submodule from `@auth/core/jwt`.\n *\n * ## Usage\n *\n * :::warning Warning\n * This module *will* be refactored/changed. We do not recommend relying on it right now.\n * :::\n *\n *\n * ## Resources\n *\n * - [What is a JWT session strategy](https://authjs.dev/concepts/session-strategies#jwt)\n * - [RFC7519 - JSON Web Token (JWT)](https://www.rfc-editor.org/rfc/rfc7519)\n *\n * @module jwt\n */\nimport { hkdf } from \"@panva/hkdf\";\nimport { EncryptJWT, jwtDecrypt } from \"jose\";\nimport { SessionStore } from \"./lib/utils/cookie.js\";\nimport { MissingSecret } from \"./errors.js\";\nimport { parse } from \"cookie\";\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nconst now = () => (Date.now() / 1000) | 0;\n/** Issues a JWT. By default, the JWT is encrypted using \"A256GCM\". */\nexport async function encode(params) {\n    const { token = {}, secret, maxAge = DEFAULT_MAX_AGE, salt } = params;\n    const encryptionSecret = await getDerivedEncryptionKey(secret, salt);\n    // @ts-expect-error `jose` allows any object as payload.\n    return await new EncryptJWT(token)\n        .setProtectedHeader({ alg: \"dir\", enc: \"A256GCM\" })\n        .setIssuedAt()\n        .setExpirationTime(now() + maxAge)\n        .setJti(crypto.randomUUID())\n        .encrypt(encryptionSecret);\n}\n/** Decodes a Auth.js issued JWT. */\nexport async function decode(params) {\n    const { token, secret, salt } = params;\n    if (!token)\n        return null;\n    const encryptionSecret = await getDerivedEncryptionKey(secret, salt);\n    const { payload } = await jwtDecrypt(token, encryptionSecret, {\n        clockTolerance: 15,\n    });\n    return payload;\n}\nexport async function getToken(params) {\n    const { secureCookie, cookieName = secureCookie\n        ? \"__Secure-auth.session-token\"\n        : \"auth.session-token\", decode: _decode = decode, salt = cookieName, secret, logger = console, raw, req, } = params;\n    if (!req)\n        throw new Error(\"Must pass `req` to JWT getToken()\");\n    if (!secret)\n        throw new MissingSecret(\"Must pass `secret` if not set to JWT getToken()\");\n    const headers = req.headers instanceof Headers ? req.headers : new Headers(req.headers);\n    const sessionStore = new SessionStore({ name: cookieName, options: { secure: secureCookie } }, parse(headers.get(\"cookie\") ?? \"\"), logger);\n    let token = sessionStore.value;\n    const authorizationHeader = headers.get(\"authorization\");\n    if (!token && authorizationHeader?.split(\" \")[0] === \"Bearer\") {\n        const urlEncodedToken = authorizationHeader.split(\" \")[1];\n        token = decodeURIComponent(urlEncodedToken);\n    }\n    if (!token)\n        return null;\n    if (raw)\n        return token;\n    try {\n        return await _decode({ token, secret, salt });\n    }\n    catch {\n        return null;\n    }\n}\nasync function getDerivedEncryptionKey(keyMaterial, salt) {\n    return await hkdf(\"sha256\", keyMaterial, salt, `Auth.js Generated Encryption Key (${salt})`, 32);\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAoCC;;;;;;;;;;;;;;;;;;AAMD,MAAM,kBAAkB,KAAK,KAAK,KAAK,IAAI,UAAU;AACrD,MAAM,MAAM,IAAM,AAAC,KAAK,GAAG,KAAK,OAAQ;AAEjC,eAAe,OAAO,MAAM;IAC/B,MAAM,EAAE,QAAQ,CAAC,CAAC,EAAE,MAAM,EAAE,SAAS,eAAe,EAAE,IAAI,EAAE,GAAG;IAC/D,MAAM,mBAAmB,MAAM,wBAAwB,QAAQ;IAC/D,wDAAwD;IACxD,OAAO,MAAM,iOAAe,OACvB,kBAAkB,CAAC;QAAE,KAAK;QAAO,KAAK;IAAU,GAChD,WAAW,GACX,iBAAiB,CAAC,QAAQ,QAC1B,MAAM,CAAC,OAAO,UAAU,IACxB,OAAO,CAAC;AACjB;AAEO,eAAe,OAAO,MAAM;IAC/B,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG;IAChC,IAAI,CAAC,OACD,OAAO;IACX,MAAM,mBAAmB,MAAM,wBAAwB,QAAQ;IAC/D,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,6NAAW,OAAO,kBAAkB;QAC1D,gBAAgB;IACpB;IACA,OAAO;AACX;AACO,eAAe,SAAS,MAAM;IACjC,MAAM,EAAE,YAAY,EAAE,aAAa,eAC7B,gCACA,oBAAoB,EAAE,QAAQ,UAAU,MAAM,EAAE,OAAO,UAAU,EAAE,MAAM,EAAE,SAAS,OAAO,EAAE,GAAG,EAAE,GAAG,EAAG,GAAG;IACjH,IAAI,CAAC,KACD,MAAM,IAAI,MAAM;IACpB,IAAI,CAAC,QACD,MAAM,0NAAkB;IAC5B,MAAM,UAAU,IAAI,OAAO,YAAY,UAAU,IAAI,OAAO,GAAG,IAAI,QAAQ,IAAI,OAAO;IACtF,MAAM,eAAe,yOAAiB;QAAE,MAAM;QAAY,SAAS;YAAE,QAAQ;QAAa;IAAE,GAAG,4LAAM,QAAQ,GAAG,CAAC,aAAa,KAAK;IACnI,IAAI,QAAQ,aAAa,KAAK;IAC9B,MAAM,sBAAsB,QAAQ,GAAG,CAAC;IACxC,IAAI,CAAC,SAAS,qBAAqB,MAAM,IAAI,CAAC,EAAE,KAAK,UAAU;QAC3D,MAAM,kBAAkB,oBAAoB,KAAK,CAAC,IAAI,CAAC,EAAE;QACzD,QAAQ,mBAAmB;IAC/B;IACA,IAAI,CAAC,OACD,OAAO;IACX,IAAI,KACA,OAAO;IACX,IAAI;QACA,OAAO,MAAM,QAAQ;YAAE;YAAO;YAAQ;QAAK;IAC/C,EACA,OAAM;QACF,OAAO;IACX;AACJ;AACA,eAAe,wBAAwB,WAAW,EAAE,IAAI;IACpD,OAAO,MAAM,oOAAK,UAAU,aAAa,MAAM,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC,EAAE;AACjG"}},
    {"offset": {"line": 572, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 577, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/callback-url.js"],"sourcesContent":["/**\n * Get callback URL based on query param / cookie + validation,\n * and add it to `req.options.callbackUrl`.\n */\nexport async function createCallbackUrl({ options, paramValue, cookieValue, }) {\n    const { url, callbacks } = options;\n    let callbackUrl = url.origin;\n    if (paramValue) {\n        // If callbackUrl form field or query parameter is passed try to use it if allowed\n        callbackUrl = await callbacks.redirect({\n            url: paramValue,\n            baseUrl: url.origin,\n        });\n    }\n    else if (cookieValue) {\n        // If no callbackUrl specified, try using the value from the cookie if allowed\n        callbackUrl = await callbacks.redirect({\n            url: cookieValue,\n            baseUrl: url.origin,\n        });\n    }\n    return {\n        callbackUrl,\n        // Save callback URL in a cookie so that it can be used for subsequent requests in signin/signout/callback flow\n        callbackUrlCookie: callbackUrl !== cookieValue ? callbackUrl : undefined,\n    };\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;AACM,eAAe,kBAAkB,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,EAAG;IACzE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG;IAC3B,IAAI,cAAc,IAAI,MAAM;IAC5B,IAAI,YAAY;QACZ,kFAAkF;QAClF,cAAc,MAAM,UAAU,QAAQ,CAAC;YACnC,KAAK;YACL,SAAS,IAAI,MAAM;QACvB;IACJ,OACK,IAAI,aAAa;QAClB,8EAA8E;QAC9E,cAAc,MAAM,UAAU,QAAQ,CAAC;YACnC,KAAK;YACL,SAAS,IAAI,MAAM;QACvB;IACJ;IACA,OAAO;QACH;QACA,+GAA+G;QAC/G,mBAAmB,gBAAgB,cAAc,cAAc;IACnE;AACJ"}},
    {"offset": {"line": 605, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/web.js"],"sourcesContent":["import { parse as parseCookie, serialize } from \"cookie\";\nimport { UnknownAction } from \"../../errors.js\";\nasync function getBody(req) {\n    if (!(\"body\" in req) || !req.body || req.method !== \"POST\")\n        return;\n    const contentType = req.headers.get(\"content-type\");\n    if (contentType?.includes(\"application/json\")) {\n        return await req.json();\n    }\n    else if (contentType?.includes(\"application/x-www-form-urlencoded\")) {\n        const params = new URLSearchParams(await req.text());\n        return Object.fromEntries(params);\n    }\n}\nconst actions = [\n    \"providers\",\n    \"session\",\n    \"csrf\",\n    \"signin\",\n    \"signout\",\n    \"callback\",\n    \"verify-request\",\n    \"error\",\n];\nexport async function toInternalRequest(req) {\n    try {\n        let originalUrl = new URL(req.url.replace(/\\/$/, \"\"));\n        let url = new URL(originalUrl);\n        const pathname = url.pathname.replace(/\\/$/, \"\");\n        const action = actions.find((a) => pathname.includes(a));\n        if (!action) {\n            throw new UnknownAction(`Cannot detect action in pathname (${pathname}).`);\n        }\n        // Remove anything after the basepath\n        const re = new RegExp(`/${action}.*`);\n        url = new URL(url.href.replace(re, \"\"));\n        if (req.method !== \"GET\" && req.method !== \"POST\") {\n            throw new UnknownAction(\"Only GET and POST requests are supported.\");\n        }\n        const providerIdOrAction = pathname.split(\"/\").pop();\n        let providerId;\n        if (providerIdOrAction &&\n            !action.includes(providerIdOrAction) &&\n            [\"signin\", \"callback\"].includes(action)) {\n            providerId = providerIdOrAction;\n        }\n        return {\n            url,\n            action,\n            providerId,\n            method: req.method,\n            headers: Object.fromEntries(req.headers),\n            body: req.body ? await getBody(req) : undefined,\n            cookies: parseCookie(req.headers.get(\"cookie\") ?? \"\") ?? {},\n            error: originalUrl.searchParams.get(\"error\") ?? undefined,\n            query: Object.fromEntries(originalUrl.searchParams),\n        };\n    }\n    catch (e) {\n        return e;\n    }\n}\nexport function toRequest(request) {\n    return new Request(request.url, {\n        headers: request.headers,\n        method: request.method,\n        body: request.method === \"POST\"\n            ? JSON.stringify(request.body ?? {})\n            : undefined,\n    });\n}\nexport function toResponse(res) {\n    const headers = new Headers(res.headers);\n    res.cookies?.forEach((cookie) => {\n        const { name, value, options } = cookie;\n        const cookieHeader = serialize(name, value, options);\n        if (headers.has(\"Set-Cookie\"))\n            headers.append(\"Set-Cookie\", cookieHeader);\n        else\n            headers.set(\"Set-Cookie\", cookieHeader);\n    });\n    let body = res.body;\n    if (headers.get(\"content-type\") === \"application/json\")\n        body = JSON.stringify(res.body);\n    else if (headers.get(\"content-type\") === \"application/x-www-form-urlencoded\")\n        body = new URLSearchParams(res.body).toString();\n    const status = res.redirect ? 302 : res.status ?? 200;\n    const response = new Response(body, { headers, status });\n    if (res.redirect)\n        response.headers.set(\"Location\", res.redirect);\n    return response;\n}\n/** Web compatible method to create a hash, using SHA256 */\nexport async function createHash(message) {\n    const data = new TextEncoder().encode(message);\n    const hash = await crypto.subtle.digest(\"SHA-256\", data);\n    return Array.from(new Uint8Array(hash))\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\")\n        .toString();\n}\n/** Web compatible method to create a random string of a given length */\nexport function randomString(size) {\n    const i2hex = (i) => (\"0\" + i.toString(16)).slice(-2);\n    const r = (a, i) => a + i2hex(i);\n    const bytes = crypto.getRandomValues(new Uint8Array(size));\n    return Array.from(bytes).reduce(r, \"\");\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 722, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js"],"sourcesContent":["import { createHash, randomString } from \"../../../utils/web.js\";\nimport { MissingCSRF } from \"../../../../errors.js\";\n/**\n * Ensure CSRF Token cookie is set for any subsequent requests.\n * Used as part of the strategy for mitigation for CSRF tokens.\n *\n * Creates a cookie like 'next-auth.csrf-token' with the value 'token|hash',\n * where 'token' is the CSRF token and 'hash' is a hash made of the token and\n * the secret, and the two values are joined by a pipe '|'. By storing the\n * value and the hash of the value (with the secret used as a salt) we can\n * verify the cookie was set by the server and not by a malicious attacker.\n *\n * For more details, see the following OWASP links:\n * https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\n * https://owasp.org/www-chapter-london/assets/slides/David_Johansson-Double_Defeat_of_Double-Submit_Cookie.pdf\n */\nexport async function createCSRFToken({ options, cookieValue, isPost, bodyValue, }) {\n    if (cookieValue) {\n        const [csrfToken, csrfTokenHash] = cookieValue.split(\"|\");\n        const expectedCsrfTokenHash = await createHash(`${csrfToken}${options.secret}`);\n        if (csrfTokenHash === expectedCsrfTokenHash) {\n            // If hash matches then we trust the CSRF token value\n            // If this is a POST request and the CSRF Token in the POST request matches\n            // the cookie we have already verified is the one we have set, then the token is verified!\n            const csrfTokenVerified = isPost && csrfToken === bodyValue;\n            return { csrfTokenVerified, csrfToken };\n        }\n    }\n    // New CSRF token\n    const csrfToken = randomString(32);\n    const csrfTokenHash = await createHash(`${csrfToken}${options.secret}`);\n    const cookie = `${csrfToken}|${csrfTokenHash}`;\n    return { cookie, csrfToken };\n}\nexport function validateCSRF(action, verified) {\n    if (verified)\n        return;\n    throw new MissingCSRF(`CSRF token was missing during an action ${action}.`);\n}\n"],"names":[],"mappings":";;;;;;;;;AAgBO,eAAe,gBAAgB,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,SAAS,EAAG;IAC9E,IAAI,aAAa;QACb,MAAM,CAAC,WAAW,cAAc,GAAG,YAAY,KAAK,CAAC;QACrD,MAAM,wBAAwB,MAAM,gOAAW,CAAC,EAAE,UAAU,EAAE,QAAQ,MAAM,CAAC,CAAC;QAC9E,IAAI,kBAAkB,uBAAuB;YACzC,qDAAqD;YACrD,2EAA2E;YAC3E,0FAA0F;YAC1F,MAAM,oBAAoB,UAAU,cAAc;YAClD,OAAO;gBAAE;gBAAmB;YAAU;QAC1C;IACJ;IACA,iBAAiB;IACjB,MAAM,YAAY,kOAAa;IAC/B,MAAM,gBAAgB,MAAM,gOAAW,CAAC,EAAE,UAAU,EAAE,QAAQ,MAAM,CAAC,CAAC;IACtE,MAAM,SAAS,CAAC,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC;IAC9C,OAAO;QAAE;QAAQ;IAAU;AAC/B;AACO,SAAS,aAAa,MAAM,EAAE,QAAQ;IACzC,IAAI,UACA;IACJ,MAAM,wNAAgB,CAAC,wCAAwC,EAAE,OAAO,CAAC,CAAC;AAC9E"}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 764, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/merge.js"],"sourcesContent":["// Source: https://stackoverflow.com/a/34749873/5364135\n/** Simple object check */\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n/** Deep merge two objects */\nexport function merge(target, ...sources) {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key])\n                    Object.assign(target, { [key]: {} });\n                merge(target[key], source[key]);\n            }\n            else {\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n    return merge(target, ...sources);\n}\n"],"names":[],"mappings":"AAAA,uDAAuD;AACvD,wBAAwB;;;AACxB,SAAS,SAAS,IAAI;IAClB,OAAO,QAAQ,OAAO,SAAS,YAAY,CAAC,MAAM,OAAO,CAAC;AAC9D;AAEO,SAAS,MAAM,MAAM,EAAE,GAAG,OAAO;IACpC,IAAI,CAAC,QAAQ,MAAM,EACf,OAAO;IACX,MAAM,SAAS,QAAQ,KAAK;IAC5B,IAAI,SAAS,WAAW,SAAS,SAAS;QACtC,IAAK,MAAM,OAAO,OAAQ;YACtB,IAAI,SAAS,MAAM,CAAC,IAAI,GAAG;gBACvB,IAAI,CAAC,MAAM,CAAC,IAAI,EACZ,OAAO,MAAM,CAAC,QAAQ;oBAAE,CAAC,IAAI,EAAE,CAAC;gBAAE;gBACtC,MAAM,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;YAClC,OACK;gBACD,OAAO,MAAM,CAAC,QAAQ;oBAAE,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI;gBAAC;YAC/C;QACJ;IACJ;IACA,OAAO,MAAM,WAAW;AAC5B"}},
    {"offset": {"line": 790, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/providers.js"],"sourcesContent":["import { OAuthProfileParseError } from \"../../errors.js\";\nimport { merge } from \"./merge.js\";\n/**\n * Adds `signinUrl` and `callbackUrl` to each provider\n * and deep merge user-defined options.\n */\nexport default function parseProviders(params) {\n    const { url, providerId, options } = params;\n    const providers = params.providers.map((p) => {\n        const provider = typeof p === \"function\" ? p() : p;\n        const { options: userOptions, ...defaults } = provider;\n        const id = (userOptions?.id ?? defaults.id);\n        const merged = merge(defaults, userOptions, {\n            signinUrl: `${url}/signin/${id}`,\n            callbackUrl: `${url}/callback/${id}`,\n        });\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            merged.redirectProxyUrl ?? (merged.redirectProxyUrl = options.redirectProxyUrl);\n            return normalizeOAuth(merged);\n        }\n        return merged;\n    });\n    return {\n        providers,\n        provider: providers.find(({ id }) => id === providerId),\n    };\n}\n// TODO: Also add discovery here, if some endpoints/config are missing.\n// We should return both a client and authorization server config.\nfunction normalizeOAuth(c) {\n    if (c.issuer)\n        c.wellKnown ?? (c.wellKnown = `${c.issuer}/.well-known/openid-configuration`);\n    const authorization = normalizeEndpoint(c.authorization, c.issuer);\n    if (authorization && !authorization.url?.searchParams.has(\"scope\")) {\n        authorization.url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    const token = normalizeEndpoint(c.token, c.issuer);\n    const userinfo = normalizeEndpoint(c.userinfo, c.issuer);\n    const checks = c.checks ?? [\"pkce\"];\n    if (c.redirectProxyUrl) {\n        if (!checks.includes(\"state\"))\n            checks.push(\"state\");\n        c.redirectProxyUrl = `${c.redirectProxyUrl}/callback/${c.id}`;\n    }\n    return {\n        ...c,\n        authorization,\n        token,\n        checks,\n        userinfo,\n        profile: c.profile ?? defaultProfile,\n        account: c.account ?? defaultAccount,\n    };\n}\n/**\n * Returns basic user profile from the userinfo response/`id_token` claims.\n * @see https://authjs.dev/reference/core/adapters#user\n * @see https://openid.net/specs/openid-connect-core-1_0.html#IDToken\n * @see https://openid.net/specs/openid-connect-core-1_0.html#UserInfo\n */\nconst defaultProfile = (profile) => {\n    const id = profile.sub ?? profile.id;\n    if (!id)\n        throw new OAuthProfileParseError(\"Missing user id\");\n    return stripUndefined({\n        id: id.toString(),\n        name: profile.name ?? profile.nickname ?? profile.preferred_username,\n        email: profile.email,\n        image: profile.picture,\n    });\n};\n/**\n * Returns basic OAuth/OIDC values from the token response.\n * @see https://www.ietf.org/rfc/rfc6749.html#section-5.1\n * @see https://openid.net/specs/openid-connect-core-1_0.html#TokenResponse\n * @see https://authjs.dev/reference/core/adapters#account\n */\nconst defaultAccount = (account) => {\n    return stripUndefined({\n        access_token: account.access_token,\n        id_token: account.id_token,\n        refresh_token: account.refresh_token,\n        expires_at: account.expires_at,\n        scope: account.scope,\n        token_type: account.token_type,\n        session_state: account.session_state,\n    });\n};\nfunction stripUndefined(o) {\n    const result = {};\n    for (let [k, v] of Object.entries(o))\n        v !== undefined && (result[k] = v);\n    return result;\n}\nfunction normalizeEndpoint(e, issuer) {\n    if (!e && issuer)\n        return;\n    if (typeof e === \"string\") {\n        return { url: new URL(e) };\n    }\n    // If e.url is undefined, it's because the provider config\n    // assumes that we will use the issuer endpoint.\n    // The existence of either e.url or provider.issuer is checked in\n    // assert.ts. We fallback to \"https://authjs.dev\" to be able to pass around\n    // a valid URL even if the user only provided params.\n    // NOTE: This need to be checked when constructing the URL\n    // for the authorization, token and userinfo endpoints.\n    const url = new URL(e?.url ?? \"https://authjs.dev\");\n    if (e?.params != null) {\n        for (let [key, value] of Object.entries(e.params)) {\n            if (key === \"claims\")\n                value = JSON.stringify(value);\n            url.searchParams.set(key, String(value));\n        }\n    }\n    return { url, request: e?.request, conform: e?.conform };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 919, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/logger.js"],"sourcesContent":["import { AuthError } from \"../../errors.js\";\nconst red = \"\\x1b[31m\";\nconst yellow = \"\\x1b[33m\";\nconst grey = \"\\x1b[90m\";\nconst reset = \"\\x1b[0m\";\nexport const logger = {\n    error(error) {\n        const name = error instanceof AuthError ? error.type : error.name;\n        console.error(`${red}[auth][error]${reset} ${name}: ${error.message}`);\n        if (error.cause &&\n            typeof error.cause === \"object\" &&\n            \"err\" in error.cause &&\n            error.cause.err instanceof Error) {\n            const { err, ...data } = error.cause;\n            console.error(`${red}[auth][cause]${reset}:`, err.stack);\n            if (data)\n                console.error(`${red}[auth][details]${reset}:`, JSON.stringify(data, null, 2));\n        }\n        else if (error.stack) {\n            console.error(error.stack.replace(/.*/, \"\").substring(1));\n        }\n    },\n    warn(code) {\n        const url = `https://warnings.authjs.dev#${code}`;\n        console.warn(`${yellow}[auth][warn][${code}]${reset}`, `Read more: ${url}`);\n    },\n    debug(message, metadata) {\n        console.log(`${grey}[auth][debug]:${reset} ${message}`, JSON.stringify(metadata, null, 2));\n    },\n};\n/**\n * Override the built-in logger with user's implementation.\n * Any `undefined` level will use the default logger.\n */\nexport function setLogger(newLogger = {}, debug) {\n    // Turn off debug logging if `debug` isn't set to `true`\n    if (!debug)\n        logger.debug = () => { };\n    if (newLogger.error)\n        logger.error = newLogger.error;\n    if (newLogger.warn)\n        logger.warn = newLogger.warn;\n    if (newLogger.debug)\n        logger.debug = newLogger.debug;\n}\n"],"names":[],"mappings":";;;;;;;AACA,MAAM,MAAM;AACZ,MAAM,SAAS;AACf,MAAM,OAAO;AACb,MAAM,QAAQ;AACP,MAAM,SAAS;IAClB,OAAM,KAAK;QACP,MAAM,OAAO,qOAA6B,MAAM,IAAI,GAAG,MAAM,IAAI;QACjE,QAAQ,KAAK,CAAC,CAAC,EAAE,IAAI,aAAa,EAAE,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,MAAM,OAAO,CAAC,CAAC;QACrE,IAAI,MAAM,KAAK,IACX,OAAO,MAAM,KAAK,KAAK,YACvB,SAAS,MAAM,KAAK,IACpB,MAAM,KAAK,CAAC,GAAG,YAAY,OAAO;YAClC,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG,MAAM,KAAK;YACpC,QAAQ,KAAK,CAAC,CAAC,EAAE,IAAI,aAAa,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,KAAK;YACvD,IAAI,MACA,QAAQ,KAAK,CAAC,CAAC,EAAE,IAAI,eAAe,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,MAAM,MAAM;QACnF,OACK,IAAI,MAAM,KAAK,EAAE;YAClB,QAAQ,KAAK,CAAC,MAAM,KAAK,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,CAAC;QAC1D;IACJ;IACA,MAAK,IAAI;QACL,MAAM,MAAM,CAAC,4BAA4B,EAAE,KAAK,CAAC;QACjD,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAO,aAAa,EAAE,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC;IAC9E;IACA,OAAM,OAAO,EAAE,QAAQ;QACnB,QAAQ,GAAG,CAAC,CAAC,EAAE,KAAK,cAAc,EAAE,MAAM,CAAC,EAAE,QAAQ,CAAC,EAAE,KAAK,SAAS,CAAC,UAAU,MAAM;IAC3F;AACJ;AAKO,SAAS,UAAU,YAAY,CAAC,CAAC,EAAE,KAAK;IAC3C,wDAAwD;IACxD,IAAI,CAAC,OACD,OAAO,KAAK,GAAG,KAAQ;IAC3B,IAAI,UAAU,KAAK,EACf,OAAO,KAAK,GAAG,UAAU,KAAK;IAClC,IAAI,UAAU,IAAI,EACd,OAAO,IAAI,GAAG,UAAU,IAAI;IAChC,IAAI,UAAU,KAAK,EACf,OAAO,KAAK,GAAG,UAAU,KAAK;AACtC"}},
    {"offset": {"line": 957, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 962, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/init.js"],"sourcesContent":["import * as jwt from \"../jwt.js\";\nimport { createCallbackUrl } from \"./utils/callback-url.js\";\nimport * as cookie from \"./utils/cookie.js\";\nimport { createCSRFToken } from \"./actions/callback/oauth/csrf-token.js\";\nimport { AdapterError, EventError } from \"../errors.js\";\nimport parseProviders from \"./utils/providers.js\";\nimport { logger } from \"./utils/logger.js\";\nexport const defaultCallbacks = {\n    signIn() {\n        return true;\n    },\n    redirect({ url, baseUrl }) {\n        if (url.startsWith(\"/\"))\n            return `${baseUrl}${url}`;\n        else if (new URL(url).origin === baseUrl)\n            return url;\n        return baseUrl;\n    },\n    session({ session }) {\n        return session;\n    },\n    jwt({ token }) {\n        return token;\n    },\n};\n/** Initialize all internal options and cookies. */\nexport async function init({ authOptions, providerId, action, url, cookies: reqCookies, callbackUrl: reqCallbackUrl, csrfToken: reqCsrfToken, csrfDisabled, isPost, }) {\n    const { providers, provider } = parseProviders({\n        providers: authOptions.providers,\n        url,\n        providerId,\n        options: authOptions,\n    });\n    const maxAge = 30 * 24 * 60 * 60; // Sessions expire after 30 days of being idle by default\n    let isOnRedirectProxy = false;\n    if ((provider?.type === \"oauth\" || provider?.type === \"oidc\") &&\n        provider.redirectProxyUrl) {\n        try {\n            isOnRedirectProxy =\n                new URL(provider.redirectProxyUrl).origin === url.origin;\n        }\n        catch {\n            throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`);\n        }\n    }\n    // User provided options are overridden by other options,\n    // except for the options with special handling above\n    const options = {\n        debug: false,\n        pages: {},\n        theme: {\n            colorScheme: \"auto\",\n            logo: \"\",\n            brandColor: \"\",\n            buttonText: \"\",\n        },\n        // Custom options override defaults\n        ...authOptions,\n        // These computed settings can have values in userOptions but we override them\n        // and are request-specific.\n        url,\n        action,\n        // @ts-expect-errors\n        provider,\n        cookies: {\n            ...cookie.defaultCookies(authOptions.useSecureCookies ?? url.protocol === \"https:\"),\n            // Allow user cookie options to override any cookie settings above\n            ...authOptions.cookies,\n        },\n        providers,\n        // Session options\n        session: {\n            // If no adapter specified, force use of JSON Web Tokens (stateless)\n            strategy: authOptions.adapter ? \"database\" : \"jwt\",\n            maxAge,\n            updateAge: 24 * 60 * 60,\n            generateSessionToken: () => crypto.randomUUID(),\n            ...authOptions.session,\n        },\n        // JWT options\n        jwt: {\n            // Asserted in assert.ts\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            secret: authOptions.secret,\n            maxAge: authOptions.session?.maxAge ?? maxAge,\n            encode: jwt.encode,\n            decode: jwt.decode,\n            ...authOptions.jwt,\n        },\n        // Event messages\n        events: eventsErrorHandler(authOptions.events ?? {}, logger),\n        adapter: adapterErrorHandler(authOptions.adapter, logger),\n        // Callback functions\n        callbacks: { ...defaultCallbacks, ...authOptions.callbacks },\n        logger,\n        callbackUrl: url.origin,\n        isOnRedirectProxy,\n    };\n    // Init cookies\n    const cookies = [];\n    if (csrfDisabled) {\n        options.csrfTokenVerified = true;\n    }\n    else {\n        const { csrfToken, cookie: csrfCookie, csrfTokenVerified, } = await createCSRFToken({\n            options,\n            cookieValue: reqCookies?.[options.cookies.csrfToken.name],\n            isPost,\n            bodyValue: reqCsrfToken,\n        });\n        options.csrfToken = csrfToken;\n        options.csrfTokenVerified = csrfTokenVerified;\n        if (csrfCookie) {\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: csrfCookie,\n                options: options.cookies.csrfToken.options,\n            });\n        }\n    }\n    const { callbackUrl, callbackUrlCookie } = await createCallbackUrl({\n        options,\n        cookieValue: reqCookies?.[options.cookies.callbackUrl.name],\n        paramValue: reqCallbackUrl,\n    });\n    options.callbackUrl = callbackUrl;\n    if (callbackUrlCookie) {\n        cookies.push({\n            name: options.cookies.callbackUrl.name,\n            value: callbackUrlCookie,\n            options: options.cookies.callbackUrl.options,\n        });\n    }\n    return { options, cookies };\n}\n/** Wraps an object of methods and adds error handling. */\nfunction eventsErrorHandler(methods, logger) {\n    return Object.keys(methods).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                const method = methods[name];\n                return await method(...args);\n            }\n            catch (e) {\n                logger.error(new EventError(e));\n            }\n        };\n        return acc;\n    }, {});\n}\n/** Handles adapter induced errors. */\nfunction adapterErrorHandler(adapter, logger) {\n    if (!adapter)\n        return;\n    return Object.keys(adapter).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                logger.debug(`adapter_${name}`, { args });\n                const method = adapter[name];\n                return await method(...args);\n            }\n            catch (e) {\n                const error = new AdapterError(e);\n                logger.error(error);\n                throw error;\n            }\n        };\n        return acc;\n    }, {});\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1140, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1145, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/error.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\n/** Renders an error page. */\nexport default function ErrorPage(props) {\n    const { url, error = \"default\", theme } = props;\n    const signinPageUrl = `${url}/signin`;\n    const errors = {\n        default: {\n            status: 200,\n            heading: \"Error\",\n            message: (_jsx(\"p\", { children: _jsx(\"a\", { className: \"site\", href: url?.origin, children: url?.host }) })),\n        },\n        Configuration: {\n            status: 500,\n            heading: \"Server error\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"There is a problem with the server configuration.\" }), _jsx(\"p\", { children: \"Check the server logs for more information.\" })] })),\n        },\n        AccessDenied: {\n            status: 403,\n            heading: \"Access Denied\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"You do not have permission to sign in.\" }), _jsx(\"p\", { children: _jsx(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" }) })] })),\n        },\n        Verification: {\n            status: 403,\n            heading: \"Unable to sign in\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"The sign in link is no longer valid.\" }), _jsx(\"p\", { children: \"It may have been used already or it may have expired.\" })] })),\n            signin: (_jsx(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" })),\n        },\n    };\n    const { status, heading, message, signin } = errors[error] ?? errors.default;\n    return {\n        status,\n        html: (_jsxs(\"div\", { className: \"error\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                        __html: `\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `,\n                    } })), _jsxs(\"div\", { className: \"card\", children: [theme?.logo && _jsx(\"img\", { src: theme?.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: heading }), _jsx(\"div\", { className: \"message\", children: message }), signin] })] })),\n    };\n}\n"],"names":[],"mappings":";;;;;;;;AAEe,SAAS,UAAU,KAAK;IACnC,MAAM,EAAE,GAAG,EAAE,QAAQ,SAAS,EAAE,KAAK,EAAE,GAAG;IAC1C,MAAM,gBAAgB,CAAC,EAAE,IAAI,OAAO,CAAC;IACrC,MAAM,SAAS;QACX,SAAS;YACL,QAAQ;YACR,SAAS;YACT,SAAU,wPAAK,KAAK;gBAAE,UAAU,wPAAK,KAAK;oBAAE,WAAW;oBAAQ,MAAM,KAAK;oBAAQ,UAAU,KAAK;gBAAK;YAAG;QAC7G;QACA,eAAe;YACX,QAAQ;YACR,SAAS;YACT,SAAU,0PAAM,OAAO;gBAAE,UAAU;oBAAC,wPAAK,KAAK;wBAAE,UAAU;oBAAoD;oBAAI,wPAAK,KAAK;wBAAE,UAAU;oBAA8C;iBAAG;YAAC;QAC9L;QACA,cAAc;YACV,QAAQ;YACR,SAAS;YACT,SAAU,0PAAM,OAAO;gBAAE,UAAU;oBAAC,wPAAK,KAAK;wBAAE,UAAU;oBAAyC;oBAAI,wPAAK,KAAK;wBAAE,UAAU,wPAAK,KAAK;4BAAE,WAAW;4BAAU,MAAM;4BAAe,UAAU;wBAAU;oBAAG;iBAAG;YAAC;QAClN;QACA,cAAc;YACV,QAAQ;YACR,SAAS;YACT,SAAU,0PAAM,OAAO;gBAAE,UAAU;oBAAC,wPAAK,KAAK;wBAAE,UAAU;oBAAuC;oBAAI,wPAAK,KAAK;wBAAE,UAAU;oBAAwD;iBAAG;YAAC;YACvL,QAAS,wPAAK,KAAK;gBAAE,WAAW;gBAAU,MAAM;gBAAe,UAAU;YAAU;QACvF;IACJ;IACA,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,IAAI,OAAO,OAAO;IAC5E,OAAO;QACH;QACA,MAAO,0PAAM,OAAO;YAAE,WAAW;YAAS,UAAU;gBAAC,OAAO,cAAe,wPAAK,SAAS;oBAAE,yBAAyB;wBACpG,QAAQ,CAAC;;yBAER,EAAE,OAAO,WAAW;;MAEvC,CAAC;oBACa;gBAAE;gBAAK,0PAAM,OAAO;oBAAE,WAAW;oBAAQ,UAAU;wBAAC,OAAO,QAAQ,wPAAK,OAAO;4BAAE,KAAK,OAAO;4BAAM,KAAK;4BAAQ,WAAW;wBAAO;wBAAI,wPAAK,MAAM;4BAAE,UAAU;wBAAQ;wBAAI,wPAAK,OAAO;4BAAE,WAAW;4BAAW,UAAU;wBAAQ;wBAAI;qBAAO;gBAAC;aAAG;QAAC;IAC/P;AACJ"}},
    {"offset": {"line": 1257, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1262, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/signin.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nconst signinErrors = {\n    default: \"Unable to sign in.\",\n    Signin: \"Try signing in with a different account.\",\n    OAuthSignin: \"Try signing in with a different account.\",\n    OAuthCallbackError: \"Try signing in with a different account.\",\n    OAuthCreateAccount: \"Try signing in with a different account.\",\n    EmailCreateAccount: \"Try signing in with a different account.\",\n    Callback: \"Try signing in with a different account.\",\n    OAuthAccountNotLinked: \"To confirm your identity, sign in with the same account you used originally.\",\n    EmailSignin: \"The e-mail could not be sent.\",\n    CredentialsSignin: \"Sign in failed. Check the details you provided are correct.\",\n    SessionRequired: \"Please sign in to access this page.\",\n};\nfunction hexToRgba(hex, alpha = 1) {\n    if (!hex) {\n        return;\n    }\n    // Remove the \"#\" character if it's included\n    hex = hex.replace(/^#/, \"\");\n    // Expand 3-digit hex codes to their 6-digit equivalents\n    if (hex.length === 3) {\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    }\n    // Parse the hex value to separate R, G, and B components\n    const bigint = parseInt(hex, 16);\n    const r = (bigint >> 16) & 255;\n    const g = (bigint >> 8) & 255;\n    const b = bigint & 255;\n    // Ensure the alpha value is within the valid range [0, 1]\n    alpha = Math.min(Math.max(alpha, 0), 1);\n    // Construct the RGBA string\n    const rgba = `rgba(${r}, ${g}, ${b}, ${alpha})`;\n    return rgba;\n}\nexport default function SigninPage(props) {\n    const { csrfToken, providers = [], callbackUrl, theme, email, error: errorType, } = props;\n    if (typeof document !== \"undefined\" && theme?.brandColor) {\n        document.documentElement.style.setProperty(\"--brand-color\", theme.brandColor);\n    }\n    if (typeof document !== \"undefined\" && theme?.buttonText) {\n        document.documentElement.style.setProperty(\"--button-text-color\", theme.buttonText);\n    }\n    const error = errorType && (signinErrors[errorType] ?? signinErrors.default);\n    const providerLogoPath = \"https://authjs.dev/img/providers\";\n    return (_jsxs(\"div\", { className: \"signin\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `:root {--brand-color: ${theme.brandColor}}`,\n                } })), theme?.buttonText && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [error && (_jsx(\"div\", { className: \"error\", children: _jsx(\"p\", { children: error }) })), theme?.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), providers.map((provider, i) => {\n                        let bg, text, logo, logoDark, bgDark, textDark;\n                        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n                            ;\n                            ({\n                                bg = \"\",\n                                text = \"\",\n                                logo = \"\",\n                                bgDark = bg,\n                                textDark = text,\n                                logoDark = \"\",\n                            } = provider.style ?? {});\n                            logo = logo.startsWith(\"/\") ? providerLogoPath + logo : logo;\n                            logoDark = logoDark.startsWith(\"/\")\n                                ? providerLogoPath + logoDark\n                                : logoDark || logo;\n                            logoDark || (logoDark = logo);\n                        }\n                        return (_jsxs(\"div\", { className: \"provider\", children: [provider.type === \"oauth\" || provider.type === \"oidc\" ? (_jsxs(\"form\", { action: provider.signinUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), callbackUrl && (_jsx(\"input\", { type: \"hidden\", name: \"callbackUrl\", value: callbackUrl })), _jsxs(\"button\", { type: \"submit\", className: \"button\", style: {\n                                                \"--provider-bg\": bg,\n                                                \"--provider-dark-bg\": bgDark,\n                                                \"--provider-color\": text,\n                                                \"--provider-dark-color\": textDark,\n                                                \"--provider-bg-hover\": hexToRgba(bg, 0.8),\n                                                \"--provider-dark-bg-hover\": hexToRgba(bgDark, 0.8),\n                                            }, tabIndex: 0, children: [logo && (_jsx(\"img\", { loading: \"lazy\", height: 24, width: 24, id: \"provider-logo\", src: logo })), logoDark && (_jsx(\"img\", { loading: \"lazy\", height: 24, width: 24, id: \"provider-logo-dark\", src: logoDark })), _jsxs(\"span\", { children: [\"Sign in with \", provider.name] })] })] })) : null, (provider.type === \"email\" || provider.type === \"credentials\") &&\n                                    i > 0 &&\n                                    providers[i - 1].type !== \"email\" &&\n                                    providers[i - 1].type !== \"credentials\" && _jsx(\"hr\", {}), provider.type === \"email\" && (_jsxs(\"form\", { action: provider.signinUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), _jsx(\"label\", { className: \"section-header\", htmlFor: `input-email-for-${provider.id}-provider`, children: \"Email\" }), _jsx(\"input\", { id: `input-email-for-${provider.id}-provider`, autoFocus: true, type: \"email\", name: \"email\", value: email, placeholder: \"email@example.com\", required: true }), _jsxs(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"credentials\" && (_jsxs(\"form\", { action: provider.callbackUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.credentials).map((credential) => {\n                                            return (_jsxs(\"div\", { children: [_jsx(\"label\", { className: \"section-header\", htmlFor: `input-${credential}-for-${provider.id}-provider`, children: provider.credentials[credential].label ?? credential }), _jsx(\"input\", { name: credential, id: `input-${credential}-for-${provider.id}-provider`, type: provider.credentials[credential].type ?? \"text\", placeholder: provider.credentials[credential].placeholder ?? \"\", ...provider.credentials[credential] })] }, `input-group-${provider.id}`));\n                                        }), _jsxs(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), (provider.type === \"email\" || provider.type === \"credentials\") &&\n                                    i + 1 < providers.length && _jsx(\"hr\", {})] }, provider.id));\n                    })] })] }));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1490, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1495, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/signout.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function SignoutPage(props) {\n    const { url, csrfToken, theme } = props;\n    return (_jsxs(\"div\", { className: \"signout\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), theme?.buttonText && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [theme?.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: \"Signout\" }), _jsx(\"p\", { children: \"Are you sure you want to sign out?\" }), _jsxs(\"form\", { action: `${url}/signout`, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), _jsx(\"button\", { id: \"submitButton\", type: \"submit\", children: \"Sign out\" })] })] })] }));\n}\n"],"names":[],"mappings":";;;;;;;;AACe,SAAS,YAAY,KAAK;IACrC,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG;IAClC,OAAQ,0PAAM,OAAO;QAAE,WAAW;QAAW,UAAU;YAAC,OAAO,cAAe,wPAAK,SAAS;gBAAE,yBAAyB;oBACvG,QAAQ,CAAC;;yBAEJ,EAAE,MAAM,UAAU,CAAC;;MAEtC,CAAC;gBACS;YAAE;YAAK,OAAO,cAAe,wPAAK,SAAS;gBAAE,yBAAyB;oBAClE,QAAQ,CAAC;;+BAEE,EAAE,MAAM,UAAU,CAAC;;MAE5C,CAAC;gBACS;YAAE;YAAK,0PAAM,OAAO;gBAAE,WAAW;gBAAQ,UAAU;oBAAC,OAAO,QAAQ,wPAAK,OAAO;wBAAE,KAAK,MAAM,IAAI;wBAAE,KAAK;wBAAQ,WAAW;oBAAO;oBAAI,wPAAK,MAAM;wBAAE,UAAU;oBAAU;oBAAI,wPAAK,KAAK;wBAAE,UAAU;oBAAqC;oBAAI,0PAAM,QAAQ;wBAAE,QAAQ,CAAC,EAAE,IAAI,QAAQ,CAAC;wBAAE,QAAQ;wBAAQ,UAAU;4BAAC,wPAAK,SAAS;gCAAE,MAAM;gCAAU,MAAM;gCAAa,OAAO;4BAAU;4BAAI,wPAAK,UAAU;gCAAE,IAAI;gCAAgB,MAAM;gCAAU,UAAU;4BAAW;yBAAG;oBAAC;iBAAG;YAAC;SAAG;IAAC;AAC5d"}},
    {"offset": {"line": 1561, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1566, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/styles.js"],"sourcesContent":["// Generated by `pnpm css`\nexport default `:root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-hover: #0f6ddb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-hover: rgba(236, 236, 236, 0.8);\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-hover: rgba(22, 27, 34, 0.8);\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n}\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-hover: rgba(22, 27, 34, 0.8);\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n  }\n\n  button,\n  a.button {\n    color: var(--provider-dark-color, var(--color-primary));\n    background-color: var(--provider-dark-bg, var(--color-background));\n  }\n    button:hover, a.button:hover {\n      background-color: var(--provider-dark-bg-hover, var(--color-background-hover)) !important;\n    }\n  #provider-logo {\n    display: none !important;\n  }\n  #provider-logo-dark {\n    width: 25px;\n    display: block !important;\n  }\n}\nhtml {\n  box-sizing: border-box;\n}\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,\n    \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif,\n    \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n}\n\nh1 {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  font-weight: 400;\n  color: var(--color-text);\n}\n\np {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\ninput[type]:focus {\n    box-shadow: none;\n  }\n\np {\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton span {\n  flex-grow: 1;\n}\n\nbutton,\na.button {\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg);\n  font-size: 1.1rem;\n  min-height: 62px;\n  border-color: rgba(0, 0, 0, 0.1);\n  border-radius: var(--border-radius);\n  transition: all 0.1s ease-in-out;\n  font-weight: 500;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\nbutton:hover, a.button:hover {\n    background-color: var(--provider-bg-hover, var(--color-background-hover));\n    cursor: pointer;\n  }\n\nbutton:active, a.button:active {\n    cursor: pointer;\n  }\n\nbutton #provider-logo, a.button #provider-logo {\n    width: 25px;\n    display: block;\n  }\n\nbutton #provider-logo-dark, a.button #provider-logo-dark {\n    display: none;\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n#submitButton:hover {\n    background-color: var(--button-hover-bg, var(--color-info-hover)) !important;\n  }\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type=\"text\"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: \"or\";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin .provider + .provider {\n    margin-top: 1rem;\n  }\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin: 1.25rem 0;\n  max-height: 70px;\n}\n\n.card {\n  background-color: var(--color-background-card);\n  border-radius: 2rem;\n  padding: 1.25rem 2rem;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n\n@media screen and (min-width: 450px) {\n  .card {\n    margin: 2rem 0;\n    width: 368px;\n  }\n}\n@media screen and (max-width: 450px) {\n  .card {\n    margin: 1rem 0;\n    width: 343px;\n  }\n}\n`;\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;uCACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0ThB,CAAC"}},
    {"offset": {"line": 1885, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/verify-request.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function VerifyRequestPage(props) {\n    const { url, theme } = props;\n    return (_jsxs(\"div\", { className: \"verify-request\", children: [theme.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [theme.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: \"Check your email\" }), _jsx(\"p\", { children: \"A sign in link has been sent to your email address.\" }), _jsx(\"p\", { children: _jsx(\"a\", { className: \"site\", href: url.origin, children: url.host }) })] })] }));\n}\n"],"names":[],"mappings":";;;;;;;;AACe,SAAS,kBAAkB,KAAK;IAC3C,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG;IACvB,OAAQ,0PAAM,OAAO;QAAE,WAAW;QAAkB,UAAU;YAAC,MAAM,UAAU,IAAK,wPAAK,SAAS;gBAAE,yBAAyB;oBAC7G,QAAQ,CAAC;;yBAEJ,EAAE,MAAM,UAAU,CAAC;;MAEtC,CAAC;gBACS;YAAE;YAAK,0PAAM,OAAO;gBAAE,WAAW;gBAAQ,UAAU;oBAAC,MAAM,IAAI,IAAI,wPAAK,OAAO;wBAAE,KAAK,MAAM,IAAI;wBAAE,KAAK;wBAAQ,WAAW;oBAAO;oBAAI,wPAAK,MAAM;wBAAE,UAAU;oBAAmB;oBAAI,wPAAK,KAAK;wBAAE,UAAU;oBAAsD;oBAAI,wPAAK,KAAK;wBAAE,UAAU,wPAAK,KAAK;4BAAE,WAAW;4BAAQ,MAAM,IAAI,MAAM;4BAAE,UAAU,IAAI,IAAI;wBAAC;oBAAG;iBAAG;YAAC;SAAG;IAAC;AACvX"}},
    {"offset": {"line": 1938, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1943, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/pages/index.js"],"sourcesContent":["import { renderToString } from \"preact-render-to-string\";\nimport ErrorPage from \"./error.js\";\nimport SigninPage from \"./signin.js\";\nimport SignoutPage from \"./signout.js\";\nimport css from \"./styles.js\";\nimport VerifyRequestPage from \"./verify-request.js\";\nfunction send({ html, title, status, cookies, theme }) {\n    return {\n        cookies,\n        status,\n        headers: { \"Content-Type\": \"text/html\" },\n        body: `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><style>${css}</style><title>${title}</title></head><body class=\"__next-auth-theme-${theme?.colorScheme ?? \"auto\"}\"><div class=\"page\">${renderToString(html)}</div></body></html>`,\n    };\n}\n/**\n * Unless the user defines their [own pages](https://authjs.dev/reference/core#pages),\n * we render a set of default ones, using Preact SSR.\n */\nexport default function renderPage(params) {\n    const { url, theme, query, cookies, pages } = params;\n    return {\n        csrf(skip, options, cookies) {\n            if (!skip) {\n                return {\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: { csrfToken: options.csrfToken },\n                    cookies,\n                };\n            }\n            options.logger.warn(\"csrf-disabled\");\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: \"\",\n                options: { ...options.cookies.csrfToken.options, maxAge: 0 },\n            });\n            return { status: 404, cookies };\n        },\n        providers(providers) {\n            return {\n                headers: { \"Content-Type\": \"application/json\" },\n                body: providers.reduce((acc, { id, name, type, signinUrl, callbackUrl }) => {\n                    acc[id] = { id, name, type, signinUrl, callbackUrl };\n                    return acc;\n                }, {}),\n            };\n        },\n        signin(error) {\n            if (pages?.signIn) {\n                let signinUrl = `${pages.signIn}${pages.signIn.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl: params.callbackUrl ?? \"/\" })}`;\n                if (error)\n                    signinUrl = `${signinUrl}&${new URLSearchParams({ error })}`;\n                return { redirect: signinUrl, cookies };\n            }\n            return send({\n                cookies,\n                theme,\n                html: SigninPage({\n                    csrfToken: params.csrfToken,\n                    // We only want to render providers\n                    providers: params.providers?.filter((provider) => \n                    // Always render oauth and email type providers\n                    [\"email\", \"oauth\", \"oidc\"].includes(provider.type) ||\n                        // Only render credentials type provider if credentials are defined\n                        (provider.type === \"credentials\" && provider.credentials) ||\n                        // Don't render other provider types\n                        false),\n                    callbackUrl: params.callbackUrl,\n                    theme: params.theme,\n                    error,\n                    ...query,\n                }),\n                title: \"Sign In\",\n            });\n        },\n        signout() {\n            if (pages?.signOut)\n                return { redirect: pages.signOut, cookies };\n            return send({\n                cookies,\n                theme,\n                html: SignoutPage({ csrfToken: params.csrfToken, url, theme }),\n                title: \"Sign Out\",\n            });\n        },\n        verifyRequest(props) {\n            if (pages?.verifyRequest)\n                return { redirect: pages.verifyRequest, cookies };\n            return send({\n                cookies,\n                theme,\n                html: VerifyRequestPage({ url, theme, ...props }),\n                title: \"Verify Request\",\n            });\n        },\n        error(error) {\n            if (pages?.error) {\n                return {\n                    redirect: `${pages.error}${pages.error.includes(\"?\") ? \"&\" : \"?\"}error=${error}`,\n                    cookies,\n                };\n            }\n            return send({\n                cookies,\n                theme,\n                // @ts-expect-error fix error type\n                ...ErrorPage({ url, theme, error }),\n                title: \"Error\",\n            });\n        },\n    };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2102, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2107, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/utils/date.js"],"sourcesContent":["/**\n * Takes a number in seconds and returns the date in the future.\n * Optionally takes a second date parameter. In that case\n * the date in the future will be calculated from that date instead of now.\n */\nexport function fromDate(time, date = Date.now()) {\n    return new Date(date + time * 1000);\n}\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;AACM,SAAS,SAAS,IAAI,EAAE,OAAO,KAAK,GAAG,EAAE;IAC5C,OAAO,IAAI,KAAK,OAAO,OAAO;AAClC"}},
    {"offset": {"line": 2117, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2122, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/callback/handle-login.js"],"sourcesContent":["import { OAuthAccountNotLinked } from \"../../../errors.js\";\nimport { fromDate } from \"../../utils/date.js\";\n/**\n * This function handles the complex flow of signing users in, and either creating,\n * linking (or not linking) accounts depending on if the user is currently logged\n * in, if they have account already and the authentication mechanism they are using.\n *\n * It prevents insecure behaviour, such as linking OAuth accounts unless a user is\n * signed in and authenticated with an existing valid account.\n *\n * All verification (e.g. OAuth flows or email address verification flows) are\n * done prior to this handler being called to avoid additional complexity in this\n * handler.\n */\nexport async function handleLoginOrRegister(sessionToken, _profile, _account, options) {\n    // Input validation\n    if (!_account?.providerAccountId || !_account.type)\n        throw new Error(\"Missing or invalid provider account\");\n    if (![\"email\", \"oauth\", \"oidc\"].includes(_account.type))\n        throw new Error(\"Provider not supported\");\n    const { adapter, jwt, events, session: { strategy: sessionStrategy, generateSessionToken }, } = options;\n    // If no adapter is configured then we don't have a database and cannot\n    // persist data; in this mode we just return a dummy session object.\n    if (!adapter) {\n        return { user: _profile, account: _account };\n    }\n    const profile = _profile;\n    let account = _account;\n    const { createUser, updateUser, getUser, getUserByAccount, getUserByEmail, linkAccount, createSession, getSessionAndUser, deleteSession, } = adapter;\n    let session = null;\n    let user = null;\n    let isNewUser = false;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    if (sessionToken) {\n        if (useJwtSession) {\n            try {\n                const salt = options.cookies.sessionToken.name;\n                session = await jwt.decode({ ...jwt, token: sessionToken, salt });\n                if (session && \"sub\" in session && session.sub) {\n                    user = await getUser(session.sub);\n                }\n            }\n            catch {\n                // If session can't be verified, treat as no session\n            }\n        }\n        else {\n            const userAndSession = await getSessionAndUser(sessionToken);\n            if (userAndSession) {\n                session = userAndSession.session;\n                user = userAndSession.user;\n            }\n        }\n    }\n    if (account.type === \"email\") {\n        // If signing in with an email, check if an account with the same email address exists already\n        const userByEmail = await getUserByEmail(profile.email);\n        if (userByEmail) {\n            // If they are not already signed in as the same user, this flow will\n            // sign them out of the current session and sign them in as the new user\n            if (user?.id !== userByEmail.id && !useJwtSession && sessionToken) {\n                // Delete existing session if they are currently signed in as another user.\n                // This will switch user accounts for the session in cases where the user was\n                // already logged in with a different account.\n                await deleteSession(sessionToken);\n            }\n            // Update emailVerified property on the user object\n            user = await updateUser({ id: userByEmail.id, emailVerified: new Date() });\n            await events.updateUser?.({ user });\n        }\n        else {\n            const { id: _, ...newUser } = { ...profile, emailVerified: new Date() };\n            // Create user account if there isn't one for the email address already\n            user = await createUser(newUser);\n            await events.createUser?.({ user });\n            isNewUser = true;\n        }\n        // Create new session\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n    // If signing in with OAuth account, check to see if the account exists already\n    const userByAccount = await getUserByAccount({\n        providerAccountId: account.providerAccountId,\n        provider: account.provider,\n    });\n    if (userByAccount) {\n        if (user) {\n            // If the user is already signed in with this account, we don't need to do anything\n            if (userByAccount.id === user.id) {\n                return { session, user, isNewUser };\n            }\n            // If the user is currently signed in, but the new account they are signing in\n            // with is already associated with another user, then we cannot link them\n            // and need to return an error.\n            throw new OAuthAccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n        }\n        // If there is no active session, but the account being signed in with is already\n        // associated with a valid user then create session to sign the user in.\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: userByAccount.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user: userByAccount, isNewUser };\n    }\n    else {\n        const { provider: p } = options;\n        const { type, provider, providerAccountId, userId, ...tokenSet } = account;\n        const defaults = { providerAccountId, provider, type, userId };\n        account = Object.assign(p.account(tokenSet) ?? {}, defaults);\n        if (user) {\n            // If the user is already signed in and the OAuth account isn't already associated\n            // with another user account then we can go ahead and link the accounts safely.\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            // As they are already signed in, we don't need to do anything after linking them\n            return { session, user, isNewUser };\n        }\n        // If the user is not signed in and it looks like a new OAuth account then we\n        // check there also isn't an user account already associated with the same\n        // email address as the one in the OAuth profile.\n        //\n        // This step is often overlooked in OAuth implementations, but covers the following cases:\n        //\n        // 1. It makes it harder for someone to accidentally create two accounts.\n        //    e.g. by signin in with email, then again with an oauth account connected to the same email.\n        // 2. It makes it harder to hijack a user account using a 3rd party OAuth account.\n        //    e.g. by creating an oauth account then changing the email address associated with it.\n        //\n        // It's quite common for services to automatically link accounts in this case, but it's\n        // better practice to require the user to sign in *then* link accounts to be sure\n        // someone is not exploiting a problem with a third party OAuth service.\n        //\n        // OAuth providers should require email address verification to prevent this, but in\n        // practice that is not always the case; this helps protect against that.\n        const userByEmail = profile.email\n            ? await getUserByEmail(profile.email)\n            : null;\n        if (userByEmail) {\n            const provider = options.provider;\n            if (provider?.allowDangerousEmailAccountLinking) {\n                // If you trust the oauth provider to correctly verify email addresses, you can opt-in to\n                // account linking even when the user is not signed-in.\n                user = userByEmail;\n            }\n            else {\n                // We end up here when we don't have an account with the same [provider].id *BUT*\n                // we do already have an account with the same email address as the one in the\n                // OAuth profile the user has just tried to sign in with.\n                //\n                // We don't want to have two accounts with the same email address, and we don't\n                // want to link them in case it's not safe to do so, so instead we prompt the user\n                // to sign in via email to verify their identity and then link the accounts.\n                throw new OAuthAccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n        }\n        else {\n            // If the current user is not logged in and the profile isn't linked to any user\n            // accounts (by email or provider account id)...\n            //\n            // If no account matching the same [provider].id or .email exists, we can\n            // create a new account for the user, link it to the OAuth account and\n            // create a new session for them so they are signed in with it.\n            const { id: _, ...newUser } = { ...profile, emailVerified: null };\n            user = await createUser(newUser);\n        }\n        await events.createUser?.({ user });\n        await linkAccount({ ...account, userId: user.id });\n        await events.linkAccount?.({ user, account, profile });\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user, isNewUser: true };\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2357, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2362, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/callback/oauth/checks.js"],"sourcesContent":["import * as jose from \"jose\";\nimport * as o from \"oauth4webapi\";\nimport { InvalidCheck } from \"../../../../errors.js\";\nimport { decode, encode } from \"../../../../jwt.js\";\n/** Returns a signed cookie. */\nexport async function signCookie(type, value, maxAge, options, data) {\n    const { cookies, logger } = options;\n    logger.debug(`CREATE_${type.toUpperCase()}`, { value, maxAge });\n    const expires = new Date();\n    expires.setTime(expires.getTime() + maxAge * 1000);\n    const token = { value };\n    if (type === \"state\" && data)\n        token.data = data;\n    const name = cookies[type].name;\n    return {\n        name,\n        value: await encode({ ...options.jwt, maxAge, token, salt: name }),\n        options: { ...cookies[type].options, expires },\n    };\n}\nconst PKCE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nexport const pkce = {\n    async create(options) {\n        const code_verifier = o.generateRandomCodeVerifier();\n        const value = await o.calculatePKCECodeChallenge(code_verifier);\n        const maxAge = PKCE_MAX_AGE;\n        const cookie = await signCookie(\"pkceCodeVerifier\", code_verifier, maxAge, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns code_verifier if the provider is configured to use PKCE,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the code_verifier is missing or invalid.\n     * @see https://www.rfc-editor.org/rfc/rfc7636\n     * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#pkce\n     */\n    async use(cookies, resCookies, options) {\n        const { provider } = options;\n        if (!provider?.checks?.includes(\"pkce\"))\n            return;\n        const codeVerifier = cookies?.[options.cookies.pkceCodeVerifier.name];\n        if (!codeVerifier)\n            throw new InvalidCheck(\"PKCE code_verifier cookie was missing.\");\n        const value = await decode({\n            ...options.jwt,\n            token: codeVerifier,\n            salt: options.cookies.pkceCodeVerifier.name,\n        });\n        if (!value?.value)\n            throw new InvalidCheck(\"PKCE code_verifier value could not be parsed.\");\n        // Clear the pkce code verifier cookie after use\n        resCookies.push({\n            name: options.cookies.pkceCodeVerifier.name,\n            value: \"\",\n            options: { ...options.cookies.pkceCodeVerifier.options, maxAge: 0 },\n        });\n        return value.value;\n    },\n};\nconst STATE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nexport function decodeState(value) {\n    try {\n        const decoder = new TextDecoder();\n        return JSON.parse(decoder.decode(jose.base64url.decode(value)));\n    }\n    catch { }\n}\nexport const state = {\n    async create(options, data) {\n        const { provider } = options;\n        if (!provider.checks.includes(\"state\")) {\n            if (data) {\n                throw new InvalidCheck(\"State data was provided but the provider is not configured to use state.\");\n            }\n            return;\n        }\n        const encodedState = jose.base64url.encode(JSON.stringify({ ...data, random: o.generateRandomState() }));\n        const maxAge = STATE_MAX_AGE;\n        const cookie = await signCookie(\"state\", encodedState, maxAge, options, data);\n        return { cookie, value: encodedState };\n    },\n    /**\n     * Returns state if the provider is configured to use state,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the state is missing or invalid.\n     * @see https://www.rfc-editor.org/rfc/rfc6749#section-10.12\n     * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n     */\n    async use(cookies, resCookies, options, paramRandom) {\n        const { provider } = options;\n        if (!provider.checks.includes(\"state\"))\n            return;\n        const state = cookies?.[options.cookies.state.name];\n        if (!state)\n            throw new InvalidCheck(\"State cookie was missing.\");\n        // IDEA: Let the user do something with the returned state\n        const encodedState = await decode({\n            ...options.jwt,\n            token: state,\n            salt: options.cookies.state.name,\n        });\n        if (!encodedState?.value)\n            throw new InvalidCheck(\"State (cookie) value could not be parsed.\");\n        const decodedState = decodeState(encodedState.value);\n        if (!decodedState)\n            throw new InvalidCheck(\"State (encoded) value could not be parsed.\");\n        if (decodedState.random !== paramRandom)\n            throw new InvalidCheck(`Random state values did not match. Expected: ${decodedState.random}. Got: ${paramRandom}`);\n        // Clear the state cookie after use\n        resCookies.push({\n            name: options.cookies.state.name,\n            value: \"\",\n            options: { ...options.cookies.state.options, maxAge: 0 },\n        });\n        return encodedState.value;\n    },\n};\nconst NONCE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nexport const nonce = {\n    async create(options) {\n        if (!options.provider.checks.includes(\"nonce\"))\n            return;\n        const value = o.generateRandomNonce();\n        const maxAge = NONCE_MAX_AGE;\n        const cookie = await signCookie(\"nonce\", value, maxAge, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns nonce if the provider is configured to use nonce,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the nonce is missing or invalid.\n     * @see https://openid.net/specs/openid-connect-core-1_0.html#NonceNotes\n     * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#nonce\n     */\n    async use(cookies, resCookies, options) {\n        const { provider } = options;\n        if (!provider?.checks?.includes(\"nonce\"))\n            return;\n        const nonce = cookies?.[options.cookies.nonce.name];\n        if (!nonce)\n            throw new InvalidCheck(\"Nonce cookie was missing.\");\n        const value = await decode({\n            ...options.jwt,\n            token: nonce,\n            salt: options.cookies.nonce.name,\n        });\n        if (!value?.value)\n            throw new InvalidCheck(\"Nonce value could not be parsed.\");\n        // Clear the nonce cookie after use\n        resCookies.push({\n            name: options.cookies.nonce.name,\n            value: \"\",\n            options: { ...options.cookies.nonce.options, maxAge: 0 },\n        });\n        return value.value;\n    },\n};\n/**\n * When the authorization flow contains a state, we check if it's a redirect proxy\n * and if so, we return the random state and the original redirect URL.\n */\nexport function handleState(query, provider, isOnRedirectProxy) {\n    let randomState;\n    let proxyRedirect;\n    if (provider.redirectProxyUrl && !query?.state) {\n        throw new InvalidCheck(\"Missing state in query, but required for redirect proxy\");\n    }\n    const state = decodeState(query?.state);\n    randomState = state?.random;\n    if (isOnRedirectProxy) {\n        if (!state?.origin)\n            return { randomState };\n        proxyRedirect = `${state.origin}?${new URLSearchParams(query)}`;\n    }\n    return { randomState, proxyRedirect };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2568, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2573, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/callback/oauth/callback.js"],"sourcesContent":["import * as checks from \"./checks.js\";\nimport * as o from \"oauth4webapi\";\nimport { OAuthCallbackError, OAuthProfileParseError, } from \"../../../../errors.js\";\n/**\n * Handles the following OAuth steps.\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3\n * https://openid.net/specs/openid-connect-core-1_0.html#UserInfoRequest\n *\n * @note Although requesting userinfo is not required by the OAuth2.0 spec,\n * we fetch it anyway. This is because we always want a user profile.\n */\nexport async function handleOAuth(query, cookies, options, randomState) {\n    const { logger, provider } = options;\n    let as;\n    const { token, userinfo } = provider;\n    // Falls back to authjs.dev if the user only passed params\n    if ((!token?.url || token.url.host === \"authjs.dev\") &&\n        (!userinfo?.url || userinfo.url.host === \"authjs.dev\")) {\n        // We assume that issuer is always defined as this has been asserted earlier\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await o.discoveryRequest(issuer);\n        const discoveredAs = await o.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!discoveredAs.token_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a token endpoint.\");\n        if (!discoveredAs.userinfo_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a userinfo endpoint.\");\n        as = discoveredAs;\n    }\n    else {\n        as = {\n            issuer: provider.issuer ?? \"https://authjs.dev\",\n            token_endpoint: token?.url.toString(),\n            userinfo_endpoint: userinfo?.url.toString(),\n        };\n    }\n    const client = {\n        client_id: provider.clientId,\n        client_secret: provider.clientSecret,\n        ...provider.client,\n    };\n    const resCookies = [];\n    const state = await checks.state.use(cookies, resCookies, options, randomState);\n    const codeGrantParams = o.validateAuthResponse(as, client, new URLSearchParams(query), provider.checks.includes(\"state\") ? state : o.skipStateCheck);\n    /** https://www.rfc-editor.org/rfc/rfc6749#section-4.1.2.1 */\n    if (o.isOAuth2Error(codeGrantParams)) {\n        const cause = { providerId: provider.id, ...codeGrantParams };\n        logger.debug(\"OAuthCallbackError\", cause);\n        throw new OAuthCallbackError(\"OAuth Provider returned an error\", cause);\n    }\n    const codeVerifier = await checks.pkce.use(cookies, resCookies, options);\n    let redirect_uri = provider.callbackUrl;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n    }\n    let codeGrantResponse = await o.authorizationCodeGrantRequest(as, client, codeGrantParams, redirect_uri, codeVerifier ?? \"auth\" // TODO: review fallback code verifier\n    );\n    if (provider.token?.conform) {\n        codeGrantResponse =\n            (await provider.token.conform(codeGrantResponse.clone())) ??\n                codeGrantResponse;\n    }\n    let challenges;\n    if ((challenges = o.parseWwwAuthenticateChallenges(codeGrantResponse))) {\n        for (const challenge of challenges) {\n            console.log(\"challenge\", challenge);\n        }\n        throw new Error(\"TODO: Handle www-authenticate challenges as needed\");\n    }\n    let profile = {};\n    let tokens;\n    if (provider.type === \"oidc\") {\n        const nonce = await checks.nonce.use(cookies, resCookies, options);\n        const result = await o.processAuthorizationCodeOpenIDResponse(as, client, codeGrantResponse, nonce ?? o.expectNoNonce);\n        if (o.isOAuth2Error(result)) {\n            console.log(\"error\", result);\n            throw new Error(\"TODO: Handle OIDC response body error\");\n        }\n        profile = o.getValidatedIdTokenClaims(result);\n        tokens = result;\n    }\n    else {\n        tokens = await o.processAuthorizationCodeOAuth2Response(as, client, codeGrantResponse);\n        if (o.isOAuth2Error(tokens)) {\n            console.log(\"error\", tokens);\n            throw new Error(\"TODO: Handle OAuth 2.0 response body error\");\n        }\n        if (userinfo?.request) {\n            const _profile = await userinfo.request({ tokens, provider });\n            if (_profile instanceof Object)\n                profile = _profile;\n        }\n        else if (userinfo?.url) {\n            const userinfoResponse = await o.userInfoRequest(as, client, tokens.access_token);\n            profile = await userinfoResponse.json();\n        }\n        else {\n            throw new TypeError(\"No userinfo endpoint configured\");\n        }\n    }\n    if (tokens.expires_in) {\n        tokens.expires_at =\n            Math.floor(Date.now() / 1000) + Number(tokens.expires_in);\n    }\n    const profileResult = await getUserAndAccount(profile, provider, tokens, logger);\n    return { ...profileResult, profile, cookies: resCookies };\n}\n/** Returns the user and account that is going to be created in the database. */\nasync function getUserAndAccount(OAuthProfile, provider, tokens, logger) {\n    try {\n        const user = await provider.profile(OAuthProfile, tokens);\n        user.email = user.email?.toLowerCase();\n        if (!user.id) {\n            throw new TypeError(`User id is missing in ${provider.name} OAuth profile response`);\n        }\n        return {\n            user,\n            account: {\n                ...tokens,\n                provider: provider.id,\n                type: provider.type,\n                providerAccountId: user.id.toString(),\n            },\n        };\n    }\n    catch (e) {\n        // If we didn't get a response either there was a problem with the provider\n        // response *or* the user cancelled the action with the provider.\n        //\n        // Unfortunately, we can't tell which - at least not in a way that works for\n        // all providers, so we return an empty object; the user should then be\n        // redirected back to the sign up page. We log the error to help developers\n        // who might be trying to debug this when configuring a new provider.\n        logger.debug(\"getProfile error details\", OAuthProfile);\n        logger.error(new OAuthProfileParseError(e, { provider: provider.id }));\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2707, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2712, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/callback/index.js"],"sourcesContent":["// TODO: Make this file smaller\nimport { AuthError, AuthorizedCallbackError, CallbackRouteError, CredentialsSignin, InvalidProvider, Verification, } from \"../../../errors.js\";\nimport { handleLoginOrRegister } from \"./handle-login.js\";\nimport { handleOAuth } from \"./oauth/callback.js\";\nimport { handleState } from \"./oauth/checks.js\";\nimport { createHash } from \"../../utils/web.js\";\n/** Handle callbacks from login services */\nexport async function callback(request, options, sessionStore, cookies) {\n    if (!options.provider)\n        throw new InvalidProvider(\"Callback route called without provider\");\n    const { query, body, method, headers } = request;\n    const { provider, adapter, url, callbackUrl, pages, jwt, events, callbacks, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, logger, } = options;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    try {\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            const { proxyRedirect, randomState } = handleState(query, provider, options.isOnRedirectProxy);\n            if (proxyRedirect) {\n                logger.debug(\"proxy redirect\", { proxyRedirect, randomState });\n                return { redirect: proxyRedirect };\n            }\n            const authorizationResult = await handleOAuth(query, request.cookies, options, randomState);\n            if (authorizationResult.cookies.length) {\n                cookies.push(...authorizationResult.cookies);\n            }\n            logger.debug(\"authorization result\", authorizationResult);\n            const { user: userFromProvider, account, profile: OAuthProfile, } = authorizationResult;\n            // If we don't have a profile object then either something went wrong\n            // or the user cancelled signing in. We don't know which, so we just\n            // direct the user to the signin page for now. We could do something\n            // else in future.\n            // TODO: Handle user cancelling signin\n            if (!userFromProvider || !account || !OAuthProfile) {\n                return { redirect: `${url}/signin`, cookies };\n            }\n            // Check if user is allowed to sign in\n            // Attempt to get Profile from OAuth provider details before invoking\n            // signIn callback - but if no user object is returned, that is fine\n            // (that just means it's a new user signing in for the first time).\n            let userByAccount;\n            if (adapter) {\n                const { getUserByAccount } = adapter;\n                userByAccount = await getUserByAccount({\n                    providerAccountId: account.providerAccountId,\n                    provider: provider.id,\n                });\n            }\n            await handleAuthorized({\n                user: userByAccount ?? userFromProvider,\n                account,\n                profile: OAuthProfile,\n            }, options.callbacks.signIn);\n            const { user, session, isNewUser } = await handleLoginOrRegister(sessionStore.value, userFromProvider, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: user.name,\n                    email: user.email,\n                    picture: user.image,\n                    sub: user.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user,\n                    account,\n                    profile: OAuthProfile,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({ user, account, profile: OAuthProfile, isNewUser });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"email\") {\n            const token = query?.token;\n            const identifier = query?.email;\n            if (!token || !identifier) {\n                const e = new TypeError(\"Missing token or email. The sign-in URL was manually opened without token/identifier or the link was not sent correctly in the email.\", { cause: { hasToken: !!token, hasEmail: !!identifier } });\n                e.name = \"Configuration\";\n                throw e;\n            }\n            const secret = provider.secret ?? options.secret;\n            // @ts-expect-error -- Verified in `assertConfig`.\n            const invite = await adapter.useVerificationToken({\n                identifier,\n                token: await createHash(`${token}${secret}`),\n            });\n            const hasInvite = !!invite;\n            const expired = invite ? invite.expires.valueOf() < Date.now() : undefined;\n            const invalidInvite = !hasInvite || expired;\n            if (invalidInvite)\n                throw new Verification({ hasInvite, expired });\n            const user = (await adapter.getUserByEmail(identifier)) ?? {\n                id: identifier,\n                email: identifier,\n                emailVerified: null,\n            };\n            const account = {\n                providerAccountId: user.email,\n                userId: user.id,\n                type: \"email\",\n                provider: provider.id,\n            };\n            await handleAuthorized({ user, account }, options.callbacks.signIn);\n            // Sign user in\n            const { user: loggedInUser, session, isNewUser, } = await handleLoginOrRegister(sessionStore.value, user, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({ user: loggedInUser, account, isNewUser });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"credentials\" && method === \"POST\") {\n            const credentials = body ?? {};\n            // TODO: Forward the original request as is, instead of reconstructing it\n            Object.entries(query ?? {}).forEach(([k, v]) => url.searchParams.set(k, v));\n            const user = await provider.authorize(credentials, \n            // prettier-ignore\n            new Request(url, { headers, method, body: JSON.stringify(body) }));\n            if (!user)\n                throw new CredentialsSignin();\n            const account = {\n                providerAccountId: user.id,\n                type: \"credentials\",\n                provider: provider.id,\n            };\n            await handleAuthorized({ user, account, credentials }, options.callbacks.signIn);\n            const defaultToken = {\n                name: user.name,\n                email: user.email,\n                picture: user.image,\n                sub: user.id?.toString(),\n            };\n            const token = await callbacks.jwt({\n                token: defaultToken,\n                user,\n                account,\n                isNewUser: false,\n                trigger: \"signIn\",\n            });\n            // Clear cookies if token is null\n            if (token === null) {\n                cookies.push(...sessionStore.clean());\n            }\n            else {\n                const salt = options.cookies.sessionToken.name;\n                // Encode token\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie expiry date\n                const cookieExpires = new Date();\n                cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: cookieExpires,\n                });\n                cookies.push(...sessionCookies);\n            }\n            await events.signIn?.({ user, account });\n            return { redirect: callbackUrl, cookies };\n        }\n        throw new InvalidProvider(`Callback for provider type (${provider.type}) is not supported`);\n    }\n    catch (e) {\n        if (e instanceof AuthError)\n            throw e;\n        const error = new CallbackRouteError(e, { provider: provider.id });\n        logger.debug(\"callback route error details\", { method, query, body });\n        throw error;\n    }\n}\nasync function handleAuthorized(params, signIn) {\n    try {\n        const authorized = await signIn(params);\n        if (!authorized)\n            throw new AuthorizedCallbackError(\"AccessDenied\");\n    }\n    catch (e) {\n        if (e instanceof AuthError)\n            throw e;\n        throw new AuthorizedCallbackError(e);\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3038, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3043, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/session.js"],"sourcesContent":["import { JWTSessionError, SessionTokenError } from \"../../errors.js\";\nimport { fromDate } from \"../utils/date.js\";\n/** Return a session object filtered via `callbacks.session` */\nexport async function session(options, sessionStore, cookies, isUpdate, newSession) {\n    const { adapter, jwt, events, callbacks, logger, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, } = options;\n    const response = {\n        body: null,\n        headers: { \"Content-Type\": \"application/json\" },\n        cookies,\n    };\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return response;\n    if (sessionStrategy === \"jwt\") {\n        try {\n            const salt = options.cookies.sessionToken.name;\n            const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            if (!payload)\n                throw new Error(\"Invalid JWT\");\n            // @ts-expect-error\n            const token = await callbacks.jwt({\n                token: payload,\n                ...(isUpdate && { trigger: \"update\" }),\n                session: newSession,\n            });\n            const newExpires = fromDate(sessionMaxAge);\n            if (token !== null) {\n                // By default, only exposes a limited subset of information to the client\n                // as needed for presentation purposes (e.g. \"you are logged in as...\").\n                const session = {\n                    user: { name: token.name, email: token.email, image: token.picture },\n                    expires: newExpires.toISOString(),\n                };\n                // @ts-expect-error\n                const newSession = await callbacks.session({ session, token });\n                // Return session payload as response\n                response.body = newSession;\n                // Refresh JWT expiry by re-signing it, with an updated expiry date\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie, to also update expiry date on cookie\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: newExpires,\n                });\n                response.cookies?.push(...sessionCookies);\n                await events.session?.({ session: newSession, token });\n            }\n            else {\n                response.cookies?.push(...sessionStore.clean());\n            }\n        }\n        catch (e) {\n            logger.error(new JWTSessionError(e));\n            // If the JWT is not verifiable remove the broken session cookie(s).\n            response.cookies?.push(...sessionStore.clean());\n        }\n        return response;\n    }\n    // Retrieve session from database\n    try {\n        const { getSessionAndUser, deleteSession, updateSession } = adapter;\n        let userAndSession = await getSessionAndUser(sessionToken);\n        // If session has expired, clean up the database\n        if (userAndSession &&\n            userAndSession.session.expires.valueOf() < Date.now()) {\n            await deleteSession(sessionToken);\n            userAndSession = null;\n        }\n        if (userAndSession) {\n            const { user, session } = userAndSession;\n            const sessionUpdateAge = options.session.updateAge;\n            // Calculate last updated date to throttle write updates to database\n            // Formula: ({expiry date} - sessionMaxAge) + sessionUpdateAge\n            //     e.g. ({expiry date} - 30 days) + 1 hour\n            const sessionIsDueToBeUpdatedDate = session.expires.valueOf() -\n                sessionMaxAge * 1000 +\n                sessionUpdateAge * 1000;\n            const newExpires = fromDate(sessionMaxAge);\n            // Trigger update of session expiry date and write to database, only\n            // if the session was last updated more than {sessionUpdateAge} ago\n            if (sessionIsDueToBeUpdatedDate <= Date.now()) {\n                await updateSession({\n                    sessionToken: sessionToken,\n                    expires: newExpires,\n                });\n            }\n            // Pass Session through to the session callback\n            const sessionPayload = await callbacks.session({\n                // By default, only exposes a limited subset of information to the client\n                // as needed for presentation purposes (e.g. \"you are logged in as...\").\n                session: {\n                    // @ts-expect-error missing `id`.\n                    user: { name: user.name, email: user.email, image: user.image },\n                    expires: session.expires.toISOString(),\n                },\n                user,\n                newSession,\n                ...(isUpdate ? { trigger: \"update\" } : {}),\n            });\n            // Return session payload as response\n            response.body = sessionPayload;\n            // Set cookie again to update expiry\n            response.cookies?.push({\n                name: options.cookies.sessionToken.name,\n                value: sessionToken,\n                options: {\n                    ...options.cookies.sessionToken.options,\n                    expires: newExpires,\n                },\n            });\n            // @ts-expect-error\n            await events.session?.({ session: sessionPayload });\n        }\n        else if (sessionToken) {\n            // If `sessionToken` was found set but it's not valid for a session then\n            // remove the sessionToken cookie from browser.\n            response.cookies?.push(...sessionStore.clean());\n        }\n    }\n    catch (e) {\n        logger.error(new SessionTokenError(e));\n    }\n    return response;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3192, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3197, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/signin/authorization-url.js"],"sourcesContent":["import * as checks from \"../callback/oauth/checks.js\";\nimport * as o from \"oauth4webapi\";\n/**\n * Generates an authorization/request token URL.\n *\n * [OAuth 2](https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/)\n */\nexport async function getAuthorizationUrl(query, options) {\n    const { logger, provider } = options;\n    let url = provider.authorization?.url;\n    let as;\n    // Falls back to authjs.dev if the user only passed params\n    if (!url || url.host === \"authjs.dev\") {\n        // If url is undefined, we assume that issuer is always defined\n        // We check this in assert.ts\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await o.discoveryRequest(issuer);\n        const as = await o.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.authorization_endpoint) {\n            throw new TypeError(\"Authorization server did not provide an authorization endpoint.\");\n        }\n        url = new URL(as.authorization_endpoint);\n    }\n    const authParams = url.searchParams;\n    let redirect_uri = provider.callbackUrl;\n    let data;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n        data = { origin: provider.callbackUrl };\n        logger.debug(\"using redirect proxy\", { redirect_uri, data });\n    }\n    const params = Object.assign({\n        response_type: \"code\",\n        // clientId can technically be undefined, should we check this in assert.ts or rely on the Authorization Server to do it?\n        client_id: provider.clientId,\n        redirect_uri,\n        // @ts-expect-error TODO:\n        ...provider.authorization?.params,\n    }, Object.fromEntries(provider.authorization?.url.searchParams ?? []), query);\n    for (const k in params)\n        authParams.set(k, params[k]);\n    const cookies = [];\n    const state = await checks.state.create(options, data);\n    if (state) {\n        authParams.set(\"state\", state.value);\n        cookies.push(state.cookie);\n    }\n    if (provider.checks?.includes(\"pkce\")) {\n        if (as && !as.code_challenge_methods_supported?.includes(\"S256\")) {\n            // We assume S256 PKCE support, if the server does not advertise that,\n            // a random `nonce` must be used for CSRF protection.\n            if (provider.type === \"oidc\")\n                provider.checks = [\"nonce\"];\n        }\n        else {\n            const { value, cookie } = await checks.pkce.create(options);\n            authParams.set(\"code_challenge\", value);\n            authParams.set(\"code_challenge_method\", \"S256\");\n            cookies.push(cookie);\n        }\n    }\n    const nonce = await checks.nonce.create(options);\n    if (nonce) {\n        authParams.set(\"nonce\", nonce.value);\n        cookies.push(nonce.cookie);\n    }\n    // TODO: This does not work in normalizeOAuth because authorization endpoint can come from discovery\n    // Need to make normalizeOAuth async\n    if (provider.type === \"oidc\" && !url.searchParams.has(\"scope\")) {\n        url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    logger.debug(\"authorization url is ready\", { url, cookies, provider });\n    return { redirect: url.toString(), cookies };\n}\n"],"names":[],"mappings":";;;;;;;;AAOO,eAAe,oBAAoB,KAAK,EAAE,OAAO;IACpD,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG;IAC7B,IAAI,MAAM,SAAS,aAAa,EAAE;IAClC,IAAI;IACJ,0DAA0D;IAC1D,IAAI,CAAC,OAAO,IAAI,IAAI,KAAK,cAAc;QACnC,+DAA+D;QAC/D,6BAA6B;QAC7B,oEAAoE;QACpE,MAAM,SAAS,IAAI,IAAI,SAAS,MAAM;QACtC,MAAM,oBAAoB,MAAM,wMAAE,gBAAgB,CAAC;QACnD,MAAM,KAAK,MAAM,wMAAE,wBAAwB,CAAC,QAAQ;QACpD,IAAI,CAAC,GAAG,sBAAsB,EAAE;YAC5B,MAAM,IAAI,UAAU;QACxB;QACA,MAAM,IAAI,IAAI,GAAG,sBAAsB;IAC3C;IACA,MAAM,aAAa,IAAI,YAAY;IACnC,IAAI,eAAe,SAAS,WAAW;IACvC,IAAI;IACJ,IAAI,CAAC,QAAQ,iBAAiB,IAAI,SAAS,gBAAgB,EAAE;QACzD,eAAe,SAAS,gBAAgB;QACxC,OAAO;YAAE,QAAQ,SAAS,WAAW;QAAC;QACtC,OAAO,KAAK,CAAC,wBAAwB;YAAE;YAAc;QAAK;IAC9D;IACA,MAAM,SAAS,OAAO,MAAM,CAAC;QACzB,eAAe;QACf,yHAAyH;QACzH,WAAW,SAAS,QAAQ;QAC5B;QACA,yBAAyB;QACzB,GAAG,SAAS,aAAa,EAAE,MAAM;IACrC,GAAG,OAAO,WAAW,CAAC,SAAS,aAAa,EAAE,IAAI,gBAAgB,EAAE,GAAG;IACvE,IAAK,MAAM,KAAK,OACZ,WAAW,GAAG,CAAC,GAAG,MAAM,CAAC,EAAE;IAC/B,MAAM,UAAU,EAAE;IAClB,MAAM,QAAQ,MAAM,4OAAO,KAAK,CAAC,MAAM,CAAC,SAAS;IACjD,IAAI,OAAO;QACP,WAAW,GAAG,CAAC,SAAS,MAAM,KAAK;QACnC,QAAQ,IAAI,CAAC,MAAM,MAAM;IAC7B;IACA,IAAI,SAAS,MAAM,EAAE,SAAS,SAAS;QACnC,IAAI,MAAM,CAAC,GAAG,gCAAgC,EAAE,SAAS,SAAS;YAC9D,sEAAsE;YACtE,qDAAqD;YACrD,IAAI,SAAS,IAAI,KAAK,QAClB,SAAS,MAAM,GAAG;gBAAC;aAAQ;QACnC,OACK;YACD,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,MAAM,4OAAO,IAAI,CAAC,MAAM,CAAC;YACnD,WAAW,GAAG,CAAC,kBAAkB;YACjC,WAAW,GAAG,CAAC,yBAAyB;YACxC,QAAQ,IAAI,CAAC;QACjB;IACJ;IACA,MAAM,QAAQ,MAAM,4OAAO,KAAK,CAAC,MAAM,CAAC;IACxC,IAAI,OAAO;QACP,WAAW,GAAG,CAAC,SAAS,MAAM,KAAK;QACnC,QAAQ,IAAI,CAAC,MAAM,MAAM;IAC7B;IACA,oGAAoG;IACpG,oCAAoC;IACpC,IAAI,SAAS,IAAI,KAAK,UAAU,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU;QAC5D,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS;IAClC;IACA,OAAO,KAAK,CAAC,8BAA8B;QAAE;QAAK;QAAS;IAAS;IACpE,OAAO;QAAE,UAAU,IAAI,QAAQ;QAAI;IAAQ;AAC/C"}},
    {"offset": {"line": 3284, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3289, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/signin/send-token.js"],"sourcesContent":["import { createHash, randomString, toRequest } from \"../../utils/web.js\";\nimport { AuthorizedCallbackError } from \"../../../errors.js\";\n/**\n * Starts an e-mail login flow, by generating a token,\n * and sending it to the user's e-mail (with the help of a DB adapter).\n * At the end, it returns a redirect to the `verify-request` page.\n */\nexport async function sendToken(request, options) {\n    const { body } = request;\n    const { provider, url, callbacks, adapter } = options;\n    const normalizer = provider.normalizeIdentifier ?? defaultNormalizer;\n    const email = normalizer(body?.email);\n    const defaultUser = { id: email, email, emailVerified: null };\n    const user = ((await adapter.getUserByEmail(email)) ??\n        defaultUser);\n    const account = {\n        providerAccountId: email,\n        userId: user.id,\n        type: \"email\",\n        provider: provider.id,\n    };\n    let authorized;\n    try {\n        const params = { user, account, email: { verificationRequest: true } };\n        authorized = await callbacks.signIn(params);\n    }\n    catch (e) {\n        throw new AuthorizedCallbackError(e);\n    }\n    if (!authorized)\n        throw new AuthorizedCallbackError(\"AccessDenied\");\n    const { callbackUrl, theme } = options;\n    const token = (await provider.generateVerificationToken?.()) ?? randomString(32);\n    const ONE_DAY_IN_SECONDS = 86400;\n    const expires = new Date(Date.now() + (provider.maxAge ?? ONE_DAY_IN_SECONDS) * 1000);\n    const secret = provider.secret ?? options.secret;\n    const sendRequest = provider.sendVerificationRequest({\n        identifier: email,\n        token,\n        expires,\n        url: `${url}/callback/${provider.id}?${new URLSearchParams({\n            callbackUrl,\n            token,\n            email,\n        })}`,\n        provider,\n        theme,\n        request: toRequest(request),\n    });\n    const createToken = adapter.createVerificationToken?.({\n        identifier: email,\n        token: await createHash(`${token}${secret}`),\n        expires,\n    });\n    await Promise.all([sendRequest, createToken]);\n    return {\n        redirect: `${url}/verify-request?${new URLSearchParams({\n            provider: provider.id,\n            type: provider.type,\n        })}`,\n    };\n}\nfunction defaultNormalizer(email) {\n    if (!email)\n        throw new Error(\"Missing email from request body.\");\n    // Get the first two elements only,\n    // separated by `@` from user input.\n    let [local, domain] = email.toLowerCase().trim().split(\"@\");\n    // The part before \"@\" can contain a \",\"\n    // but we remove it on the domain part\n    domain = domain.split(\",\")[0];\n    return `${local}@${domain}`;\n}\n"],"names":[],"mappings":";;;;;;;;AAOO,eAAe,UAAU,OAAO,EAAE,OAAO;IAC5C,MAAM,EAAE,IAAI,EAAE,GAAG;IACjB,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG;IAC9C,MAAM,aAAa,SAAS,mBAAmB,IAAI;IACnD,MAAM,QAAQ,WAAW,MAAM;IAC/B,MAAM,cAAc;QAAE,IAAI;QAAO;QAAO,eAAe;IAAK;IAC5D,MAAM,OAAQ,AAAC,MAAM,QAAQ,cAAc,CAAC,UACxC;IACJ,MAAM,UAAU;QACZ,mBAAmB;QACnB,QAAQ,KAAK,EAAE;QACf,MAAM;QACN,UAAU,SAAS,EAAE;IACzB;IACA,IAAI;IACJ,IAAI;QACA,MAAM,SAAS;YAAE;YAAM;YAAS,OAAO;gBAAE,qBAAqB;YAAK;QAAE;QACrE,aAAa,MAAM,UAAU,MAAM,CAAC;IACxC,EACA,OAAO,GAAG;QACN,MAAM,oOAA4B;IACtC;IACA,IAAI,CAAC,YACD,MAAM,oOAA4B;IACtC,MAAM,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG;IAC/B,MAAM,QAAQ,AAAC,MAAM,SAAS,yBAAyB,QAAS,kOAAa;IAC7E,MAAM,qBAAqB;IAC3B,MAAM,UAAU,IAAI,KAAK,KAAK,GAAG,KAAK,CAAC,SAAS,MAAM,IAAI,kBAAkB,IAAI;IAChF,MAAM,SAAS,SAAS,MAAM,IAAI,QAAQ,MAAM;IAChD,MAAM,cAAc,SAAS,uBAAuB,CAAC;QACjD,YAAY;QACZ;QACA;QACA,KAAK,CAAC,EAAE,IAAI,UAAU,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,IAAI,gBAAgB;YACvD;YACA;YACA;QACJ,GAAG,CAAC;QACJ;QACA;QACA,SAAS,+NAAU;IACvB;IACA,MAAM,cAAc,QAAQ,uBAAuB,GAAG;QAClD,YAAY;QACZ,OAAO,MAAM,gOAAW,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC;QAC3C;IACJ;IACA,MAAM,QAAQ,GAAG,CAAC;QAAC;QAAa;KAAY;IAC5C,OAAO;QACH,UAAU,CAAC,EAAE,IAAI,gBAAgB,EAAE,IAAI,gBAAgB;YACnD,UAAU,SAAS,EAAE;YACrB,MAAM,SAAS,IAAI;QACvB,GAAG,CAAC;IACR;AACJ;AACA,SAAS,kBAAkB,KAAK;IAC5B,IAAI,CAAC,OACD,MAAM,IAAI,MAAM;IACpB,mCAAmC;IACnC,oCAAoC;IACpC,IAAI,CAAC,OAAO,OAAO,GAAG,MAAM,WAAW,GAAG,IAAI,GAAG,KAAK,CAAC;IACvD,wCAAwC;IACxC,sCAAsC;IACtC,SAAS,OAAO,KAAK,CAAC,IAAI,CAAC,EAAE;IAC7B,OAAO,CAAC,EAAE,MAAM,CAAC,EAAE,OAAO,CAAC;AAC/B"}},
    {"offset": {"line": 3372, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3377, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/signin/index.js"],"sourcesContent":["import { getAuthorizationUrl } from \"./authorization-url.js\";\nimport { sendToken } from \"./send-token.js\";\nexport async function signIn(request, cookies, options) {\n    const signInUrl = `${options.url}/signin`;\n    if (!options.provider)\n        return { redirect: signInUrl, cookies };\n    switch (options.provider.type) {\n        case \"oauth\":\n        case \"oidc\": {\n            const { redirect, cookies: authCookies } = await getAuthorizationUrl(request.query, options);\n            if (authCookies)\n                cookies.push(...authCookies);\n            return { redirect, cookies };\n        }\n        case \"email\": {\n            return await sendToken(request, options);\n        }\n        default:\n            return { redirect: signInUrl, cookies };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAEO,eAAe,OAAO,OAAO,EAAE,OAAO,EAAE,OAAO;IAClD,MAAM,YAAY,CAAC,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC;IACzC,IAAI,CAAC,QAAQ,QAAQ,EACjB,OAAO;QAAE,UAAU;QAAW;IAAQ;IAC1C,OAAQ,QAAQ,QAAQ,CAAC,IAAI;QACzB,KAAK;QACL,KAAK;YAAQ;gBACT,MAAM,EAAE,QAAQ,EAAE,SAAS,WAAW,EAAE,GAAG,MAAM,sQAAoB,QAAQ,KAAK,EAAE;gBACpF,IAAI,aACA,QAAQ,IAAI,IAAI;gBACpB,OAAO;oBAAE;oBAAU;gBAAQ;YAC/B;QACA,KAAK;YAAS;gBACV,OAAO,MAAM,qPAAU,SAAS;YACpC;QACA;YACI,OAAO;gBAAE,UAAU;gBAAW;YAAQ;IAC9C;AACJ"}},
    {"offset": {"line": 3413, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3418, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/actions/signout.js"],"sourcesContent":["import { SignOutError } from \"../../errors.js\";\n/**\n * Destroys the session.\n * If the session strategy is database,\n * The session is also deleted from the database.\n * In any case, the session cookie is cleared and\n * {@link EventCallbacks.signOut} is emitted.\n */\nexport async function signOut(cookies, sessionStore, options) {\n    const { jwt, events, callbackUrl: redirect, logger, session } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return { redirect, cookies };\n    try {\n        if (session.strategy === \"jwt\") {\n            const salt = options.cookies.sessionToken.name;\n            const token = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            await events.signOut?.({ token });\n        }\n        else {\n            const session = await options.adapter?.deleteSession(sessionToken);\n            await events.signOut?.({ session });\n        }\n    }\n    catch (e) {\n        logger.error(new SignOutError(e));\n    }\n    cookies.push(...sessionStore.clean());\n    return { redirect, cookies };\n}\n"],"names":[],"mappings":";;;;;;AAQO,eAAe,QAAQ,OAAO,EAAE,YAAY,EAAE,OAAO;IACxD,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,aAAa,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;IAChE,MAAM,eAAe,aAAa,KAAK;IACvC,IAAI,CAAC,cACD,OAAO;QAAE;QAAU;IAAQ;IAC/B,IAAI;QACA,IAAI,QAAQ,QAAQ,KAAK,OAAO;YAC5B,MAAM,OAAO,QAAQ,OAAO,CAAC,YAAY,CAAC,IAAI;YAC9C,MAAM,QAAQ,MAAM,IAAI,MAAM,CAAC;gBAAE,GAAG,GAAG;gBAAE,OAAO;gBAAc;YAAK;YACnE,MAAM,OAAO,OAAO,GAAG;gBAAE;YAAM;QACnC,OACK;YACD,MAAM,UAAU,MAAM,QAAQ,OAAO,EAAE,cAAc;YACrD,MAAM,OAAO,OAAO,GAAG;gBAAE;YAAQ;QACrC;IACJ,EACA,OAAO,GAAG;QACN,OAAO,KAAK,CAAC,yNAAiB;IAClC;IACA,QAAQ,IAAI,IAAI,aAAa,KAAK;IAClC,OAAO;QAAE;QAAU;IAAQ;AAC/B"}},
    {"offset": {"line": 3457, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3462, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 3467, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3515, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/lib/index.js"],"sourcesContent":["import { UnknownAction } from \"../errors.js\";\nimport { SessionStore } from \"./utils/cookie.js\";\nimport { init } from \"./init.js\";\nimport renderPage from \"./pages/index.js\";\nimport * as actions from \"./actions/index.js\";\nimport { validateCSRF } from \"./actions/callback/oauth/csrf-token.js\";\n/** @internal */\nexport async function AuthInternal(request, authOptions) {\n    const { action, providerId, error, method } = request;\n    const csrfDisabled = authOptions.skipCSRFCheck === skipCSRFCheck;\n    const { options, cookies } = await init({\n        authOptions,\n        action,\n        providerId,\n        url: request.url,\n        callbackUrl: request.body?.callbackUrl ?? request.query?.callbackUrl,\n        csrfToken: request.body?.csrfToken,\n        cookies: request.cookies,\n        isPost: method === \"POST\",\n        csrfDisabled,\n    });\n    const sessionStore = new SessionStore(options.cookies.sessionToken, request.cookies, options.logger);\n    if (method === \"GET\") {\n        const render = renderPage({ ...options, query: request.query, cookies });\n        switch (action) {\n            case \"callback\":\n                return await actions.callback(request, options, sessionStore, cookies);\n            case \"csrf\":\n                return render.csrf(csrfDisabled, options, cookies);\n            case \"error\":\n                return render.error(error);\n            case \"providers\":\n                return render.providers(options.providers);\n            case \"session\":\n                return await actions.session(options, sessionStore, cookies);\n            case \"signin\":\n                return render.signin(error);\n            case \"signout\":\n                return render.signout();\n            case \"verify-request\":\n                return render.verifyRequest();\n            default:\n        }\n    }\n    else {\n        const { csrfTokenVerified } = options;\n        switch (action) {\n            case \"callback\":\n                if (options.provider.type === \"credentials\")\n                    // Verified CSRF Token required for credentials providers only\n                    validateCSRF(action, csrfTokenVerified);\n                return await actions.callback(request, options, sessionStore, cookies);\n            case \"session\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.session(options, sessionStore, cookies, true, request.body?.data);\n            case \"signin\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.signIn(request, cookies, options);\n            case \"signout\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.signOut(cookies, sessionStore, options);\n            default:\n        }\n    }\n    throw new UnknownAction(`Cannot handle action: ${action}`);\n}\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js comes with built-in {@link https://authjs.dev/concepts/security#csrf CSRF} protection, but\n * if you are implementing a framework that is already protected against CSRF attacks, you can skip this check by\n * passing this value to {@link AuthConfig.skipCSRFCheck}.\n */\nexport const skipCSRFCheck = Symbol(\"skip-csrf-check\");\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js returns a web standard {@link Response} by default, but\n * if you are implementing a framework you might want to get access to the raw internal response\n * by passing this value to {@link AuthConfig.raw}.\n */\nexport const raw = Symbol(\"return-type-raw\");\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAOO,eAAe,aAAa,OAAO,EAAE,WAAW;IACnD,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;IAC9C,MAAM,eAAe,YAAY,aAAa,KAAK;IACnD,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,kNAAK;QACpC;QACA;QACA;QACA,KAAK,QAAQ,GAAG;QAChB,aAAa,QAAQ,IAAI,EAAE,eAAe,QAAQ,KAAK,EAAE;QACzD,WAAW,QAAQ,IAAI,EAAE;QACzB,SAAS,QAAQ,OAAO;QACxB,QAAQ,WAAW;QACnB;IACJ;IACA,MAAM,eAAe,yOAAiB,QAAQ,OAAO,CAAC,YAAY,EAAE,QAAQ,OAAO,EAAE,QAAQ,MAAM;IACnG,IAAI,WAAW,OAAO;QAClB,MAAM,SAAS,+NAAW;YAAE,GAAG,OAAO;YAAE,OAAO,QAAQ,KAAK;YAAE;QAAQ;QACtE,OAAQ;YACJ,KAAK;gBACD,OAAO,MAAM,sOAAQ,QAAQ,CAAC,SAAS,SAAS,cAAc;YAClE,KAAK;gBACD,OAAO,OAAO,IAAI,CAAC,cAAc,SAAS;YAC9C,KAAK;gBACD,OAAO,OAAO,KAAK,CAAC;YACxB,KAAK;gBACD,OAAO,OAAO,SAAS,CAAC,QAAQ,SAAS;YAC7C,KAAK;gBACD,OAAO,MAAM,sOAAQ,OAAO,CAAC,SAAS,cAAc;YACxD,KAAK;gBACD,OAAO,OAAO,MAAM,CAAC;YACzB,KAAK;gBACD,OAAO,OAAO,OAAO;YACzB,KAAK;gBACD,OAAO,OAAO,aAAa;YAC/B;QACJ;IACJ,OACK;QACD,MAAM,EAAE,iBAAiB,EAAE,GAAG;QAC9B,OAAQ;YACJ,KAAK;gBACD,IAAI,QAAQ,QAAQ,CAAC,IAAI,KAAK,eAC1B,8DAA8D;gBAC9D,mQAAa,QAAQ;gBACzB,OAAO,MAAM,sOAAQ,QAAQ,CAAC,SAAS,SAAS,cAAc;YAClE,KAAK;gBACD,mQAAa,QAAQ;gBACrB,OAAO,MAAM,sOAAQ,OAAO,CAAC,SAAS,cAAc,SAAS,MAAM,QAAQ,IAAI,EAAE;YACrF,KAAK;gBACD,mQAAa,QAAQ;gBACrB,OAAO,MAAM,sOAAQ,MAAM,CAAC,SAAS,SAAS;YAClD,KAAK;gBACD,mQAAa,QAAQ;gBACrB,OAAO,MAAM,sOAAQ,OAAO,CAAC,SAAS,cAAc;YACxD;QACJ;IACJ;IACA,MAAM,0NAAkB,CAAC,sBAAsB,EAAE,OAAO,CAAC;AAC7D;AAUO,MAAM,gBAAgB,OAAO;AAU7B,MAAM,MAAM,OAAO"}},
    {"offset": {"line": 3597, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3602, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/index.js"],"sourcesContent":["/**\n *\n * :::warning Experimental\n * `@auth/core` is under active development.\n * :::\n *\n * This is the main entry point to the Auth.js library.\n *\n * Based on the {@link https://developer.mozilla.org/en-US/docs/Web/API/Request Request}\n * and {@link https://developer.mozilla.org/en-US/docs/Web/API/Response Response} Web standard APIs.\n * Primarily used to implement [framework](https://authjs.dev/concepts/frameworks)-specific packages,\n * but it can also be used directly.\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * ## Usage\n *\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {...})\n *\n * console.log(response instanceof Response) // true\n * ```\n *\n * ## Resources\n *\n * - [Getting started](https://authjs.dev/getting-started/introduction)\n * - [Most common use case guides](https://authjs.dev/guides)\n *\n * @module @auth/core\n */\nimport { assertConfig } from \"./lib/utils/assert.js\";\nimport { AuthError, ErrorPageLoop } from \"./errors.js\";\nimport { AuthInternal, raw, skipCSRFCheck } from \"./lib/index.js\";\nimport renderPage from \"./lib/pages/index.js\";\nimport { logger, setLogger } from \"./lib/utils/logger.js\";\nimport { toInternalRequest, toResponse } from \"./lib/utils/web.js\";\nexport { skipCSRFCheck, raw };\n/**\n * Core functionality provided by Auth.js.\n *\n * Receives a standard {@link Request} and returns a {@link Response}.\n *\n * @example\n * ```ts\n * import Auth from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await AuthHandler(request, {\n *   providers: [...],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n *```\n * @see [Documentation](https://authjs.dev)\n */\nexport async function Auth(request, config) {\n    setLogger(config.logger, config.debug);\n    const internalRequest = await toInternalRequest(request);\n    if (internalRequest instanceof Error) {\n        logger.error(internalRequest);\n        return Response.json(`Error: This action with HTTP ${request.method} is not supported.`, { status: 400 });\n    }\n    const assertionResult = assertConfig(internalRequest, config);\n    if (Array.isArray(assertionResult)) {\n        assertionResult.forEach(logger.warn);\n    }\n    else if (assertionResult instanceof Error) {\n        // Bail out early if there's an error in the user config\n        logger.error(assertionResult);\n        const htmlPages = [\"signin\", \"signout\", \"error\", \"verify-request\"];\n        if (!htmlPages.includes(internalRequest.action) ||\n            internalRequest.method !== \"GET\") {\n            return new Response(JSON.stringify({\n                message: \"There was a problem with the server configuration. Check the server logs for more information.\",\n                code: assertionResult.name,\n            }), { status: 500, headers: { \"Content-Type\": \"application/json\" } });\n        }\n        const { pages, theme } = config;\n        const authOnErrorPage = pages?.error &&\n            internalRequest.url.searchParams\n                .get(\"callbackUrl\")\n                ?.startsWith(pages.error);\n        if (!pages?.error || authOnErrorPage) {\n            if (authOnErrorPage) {\n                logger.error(new ErrorPageLoop(`The error page ${pages?.error} should not require authentication`));\n            }\n            const render = renderPage({ theme });\n            const page = render.error(\"Configuration\");\n            return toResponse(page);\n        }\n        return Response.redirect(`${pages.error}?error=Configuration`);\n    }\n    const isRedirect = request.headers?.has(\"X-Auth-Return-Redirect\");\n    const isRaw = config.raw === raw;\n    let response;\n    try {\n        const rawResponse = await AuthInternal(internalRequest, config);\n        if (isRaw)\n            return rawResponse;\n        response = await toResponse(rawResponse);\n    }\n    catch (e) {\n        const error = e;\n        logger.error(error);\n        const isAuthError = error instanceof AuthError;\n        if (isAuthError && isRaw && !isRedirect)\n            throw error;\n        // If the CSRF check failed for POST/session, return a 400 status code.\n        // We should not redirect to a page as this is an API route\n        if (request.method === \"POST\" && internalRequest.action === \"session\")\n            return Response.json(null, { status: 400 });\n        const type = isAuthError ? error.type : \"Configuration\";\n        const page = (isAuthError && error.kind) || \"error\";\n        const params = new URLSearchParams({ error: type });\n        const path = config.pages?.[page] ??\n            `${internalRequest.url.pathname}/${page.toLowerCase()}`;\n        const url = `${internalRequest.url.origin}${path}?${params}`;\n        if (isRedirect)\n            return Response.json({ url });\n        return Response.redirect(url);\n    }\n    const redirect = response.headers.get(\"Location\");\n    if (!isRedirect || !redirect)\n        return response;\n    return Response.json({ url: redirect }, { headers: response.headers });\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAoCC;;;;;;;;;;;;;;;;;AA0BM,eAAe,KAAK,OAAO,EAAE,MAAM;IACtC,kOAAU,OAAO,MAAM,EAAE,OAAO,KAAK;IACrC,MAAM,kBAAkB,MAAM,uOAAkB;IAChD,IAAI,2BAA2B,OAAO;QAClC,+NAAO,KAAK,CAAC;QACb,OAAO,SAAS,IAAI,CAAC,CAAC,6BAA6B,EAAE,QAAQ,MAAM,CAAC,kBAAkB,CAAC,EAAE;YAAE,QAAQ;QAAI;IAC3G;IACA,MAAM,kBAAkB,qOAAa,iBAAiB;IACtD,IAAI,MAAM,OAAO,CAAC,kBAAkB;QAChC,gBAAgB,OAAO,CAAC,+NAAO,IAAI;IACvC,OACK,IAAI,2BAA2B,OAAO;QACvC,wDAAwD;QACxD,+NAAO,KAAK,CAAC;QACb,MAAM,YAAY;YAAC;YAAU;YAAW;YAAS;SAAiB;QAClE,IAAI,CAAC,UAAU,QAAQ,CAAC,gBAAgB,MAAM,KAC1C,gBAAgB,MAAM,KAAK,OAAO;YAClC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;gBAC/B,SAAS;gBACT,MAAM,gBAAgB,IAAI;YAC9B,IAAI;gBAAE,QAAQ;gBAAK,SAAS;oBAAE,gBAAgB;gBAAmB;YAAE;QACvE;QACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG;QACzB,MAAM,kBAAkB,OAAO,SAC3B,gBAAgB,GAAG,CAAC,YAAY,CAC3B,GAAG,CAAC,gBACH,WAAW,MAAM,KAAK;QAChC,IAAI,CAAC,OAAO,SAAS,iBAAiB;YAClC,IAAI,iBAAiB;gBACjB,+NAAO,KAAK,CAAC,0NAAkB,CAAC,eAAe,EAAE,OAAO,MAAM,kCAAkC,CAAC;YACrG;YACA,MAAM,SAAS,+NAAW;gBAAE;YAAM;YAClC,MAAM,OAAO,OAAO,KAAK,CAAC;YAC1B,OAAO,gOAAW;QACtB;QACA,OAAO,SAAS,QAAQ,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,oBAAoB,CAAC;IACjE;IACA,MAAM,aAAa,QAAQ,OAAO,EAAE,IAAI;IACxC,MAAM,QAAQ,OAAO,GAAG;IACxB,IAAI;IACJ,IAAI;QACA,MAAM,cAAc,MAAM,2NAAa,iBAAiB;QACxD,IAAI,OACA,OAAO;QACX,WAAW,MAAM,gOAAW;IAChC,EACA,OAAO,GAAG;QACN,MAAM,QAAQ;QACd,+NAAO,KAAK,CAAC;QACb,MAAM,cAAc;QACpB,IAAI,eAAe,SAAS,CAAC,YACzB,MAAM;QACV,uEAAuE;QACvE,2DAA2D;QAC3D,IAAI,QAAQ,MAAM,KAAK,UAAU,gBAAgB,MAAM,KAAK,WACxD,OAAO,SAAS,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;QAC7C,MAAM,OAAO,cAAc,MAAM,IAAI,GAAG;QACxC,MAAM,OAAO,AAAC,eAAe,MAAM,IAAI,IAAK;QAC5C,MAAM,SAAS,IAAI,gBAAgB;YAAE,OAAO;QAAK;QACjD,MAAM,OAAO,OAAO,KAAK,EAAE,CAAC,KAAK,IAC7B,CAAC,EAAE,gBAAgB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,WAAW,GAAG,CAAC;QAC3D,MAAM,MAAM,CAAC,EAAE,gBAAgB,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,EAAE,OAAO,CAAC;QAC5D,IAAI,YACA,OAAO,SAAS,IAAI,CAAC;YAAE;QAAI;QAC/B,OAAO,SAAS,QAAQ,CAAC;IAC7B;IACA,MAAM,WAAW,SAAS,OAAO,CAAC,GAAG,CAAC;IACtC,IAAI,CAAC,cAAc,CAAC,UAChB,OAAO;IACX,OAAO,SAAS,IAAI,CAAC;QAAE,KAAK;IAAS,GAAG;QAAE,SAAS,SAAS,OAAO;IAAC;AACxE"}},
    {"offset": {"line": 3738, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3757, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/node_modules/.pnpm/@auth+core@0.18.4/node_modules/@auth/core/providers/github.js"],"sourcesContent":["/**\n * <div style={{backgroundColor: \"#24292f\", display: \"flex\", justifyContent: \"space-between\", color: \"#fff\", padding: 16}}>\n * <span>Built-in <b>GitHub</b> integration.</span>\n * <a href=\"https://github.com\">\n *   <img style={{display: \"block\"}} src=\"https://authjs.dev/img/providers/github.svg\" height=\"48\" width=\"48\"/>\n * </a>\n * </div>\n *\n * @module providers/github\n */\n/**\n * Add GitHub login to your page and make requests to [GitHub APIs](https://docs.github.com/en/rest).\n *\n * ### Setup\n *\n * #### Callback URL\n * ```\n * https://example.com/api/auth/callback/github\n * ```\n *\n * #### Configuration\n * ```ts\n * import { Auth } from \"@auth/core\"\n * import GitHub from \"@auth/core/providers/github\"\n *\n * const request = new Request(origin)\n * const response = await Auth(request, {\n *   providers: [GitHub({ clientId: GITHUB_CLIENT_ID, clientSecret: GITHUB_CLIENT_SECRET })],\n * })\n * ```\n *\n * ### Resources\n *\n * - [GitHub - Creating an OAuth App](https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app)\n * - [GitHub - Authorizing OAuth Apps](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps)\n * - [GitHub - Configure your GitHub OAuth Apps](https://github.com/settings/developers)\n * - [Learn more about OAuth](https://authjs.dev/concepts/oauth)\n * - [Source code](https://github.com/nextauthjs/next-auth/blob/main/packages/core/src/providers/github.ts)\n *\n * ### Notes\n *\n * By default, Auth.js assumes that the GitHub provider is\n * based on the [OAuth 2](https://www.rfc-editor.org/rfc/rfc6749.html) specification.\n *\n * :::tip\n *\n * The GitHub provider comes with a [default configuration](https://github.com/nextauthjs/next-auth/blob/main/packages/core/src/providers/github.ts).\n * To override the defaults for your use case, check out [customizing a built-in OAuth provider](https://authjs.dev/guides/providers/custom-provider#override-default-options).\n *\n * :::\n *\n * :::info **Disclaimer**\n *\n * If you think you found a bug in the default configuration, you can [open an issue](https://authjs.dev/new/provider-issue).\n *\n * Auth.js strictly adheres to the specification and it cannot take responsibility for any deviation from\n * the spec by the provider. You can open an issue, but if the problem is non-compliance with the spec,\n * we might not pursue a resolution. You can ask for more help in [Discussions](https://authjs.dev/new/github-discussions).\n *\n * :::\n */\nexport default function GitHub(config) {\n    return {\n        id: \"github\",\n        name: \"GitHub\",\n        type: \"oauth\",\n        authorization: {\n            url: \"https://github.com/login/oauth/authorize\",\n            params: { scope: \"read:user user:email\" },\n        },\n        token: \"https://github.com/login/oauth/access_token\",\n        userinfo: {\n            url: \"https://api.github.com/user\",\n            async request({ tokens, provider }) {\n                const profile = await fetch(provider.userinfo?.url, {\n                    headers: {\n                        Authorization: `Bearer ${tokens.access_token}`,\n                        \"User-Agent\": \"authjs\",\n                    },\n                }).then(async (res) => await res.json());\n                if (!profile.email) {\n                    // If the user does not have a public email, get another via the GitHub API\n                    // See https://docs.github.com/en/rest/users/emails#list-public-email-addresses-for-the-authenticated-user\n                    const res = await fetch(\"https://api.github.com/user/emails\", {\n                        headers: {\n                            Authorization: `Bearer ${tokens.access_token}`,\n                            \"User-Agent\": \"authjs\",\n                        },\n                    });\n                    if (res.ok) {\n                        const emails = await res.json();\n                        profile.email = (emails.find((e) => e.primary) ?? emails[0]).email;\n                    }\n                }\n                return profile;\n            },\n        },\n        profile(profile) {\n            return {\n                id: profile.id.toString(),\n                name: profile.name ?? profile.login,\n                email: profile.email,\n                image: profile.avatar_url,\n            };\n        },\n        style: { logo: \"/github.svg\", bg: \"#24292f\", text: \"#fff\" },\n        options: config,\n    };\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC,GACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkDC;;;AACc,SAAS,OAAO,MAAM;IACjC,OAAO;QACH,IAAI;QACJ,MAAM;QACN,MAAM;QACN,eAAe;YACX,KAAK;YACL,QAAQ;gBAAE,OAAO;YAAuB;QAC5C;QACA,OAAO;QACP,UAAU;YACN,KAAK;YACL,MAAM,SAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE;gBAC9B,MAAM,UAAU,MAAM,MAAM,SAAS,QAAQ,EAAE,KAAK;oBAChD,SAAS;wBACL,eAAe,CAAC,OAAO,EAAE,OAAO,YAAY,CAAC,CAAC;wBAC9C,cAAc;oBAClB;gBACJ,GAAG,IAAI,CAAC,OAAO,MAAQ,MAAM,IAAI,IAAI;gBACrC,IAAI,CAAC,QAAQ,KAAK,EAAE;oBAChB,2EAA2E;oBAC3E,0GAA0G;oBAC1G,MAAM,MAAM,MAAM,MAAM,sCAAsC;wBAC1D,SAAS;4BACL,eAAe,CAAC,OAAO,EAAE,OAAO,YAAY,CAAC,CAAC;4BAC9C,cAAc;wBAClB;oBACJ;oBACA,IAAI,IAAI,EAAE,EAAE;wBACR,MAAM,SAAS,MAAM,IAAI,IAAI;wBAC7B,QAAQ,KAAK,GAAG,CAAC,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,MAAM,CAAC,EAAE,EAAE,KAAK;oBACtE;gBACJ;gBACA,OAAO;YACX;QACJ;QACA,SAAQ,OAAO;YACX,OAAO;gBACH,IAAI,QAAQ,EAAE,CAAC,QAAQ;gBACvB,MAAM,QAAQ,IAAI,IAAI,QAAQ,KAAK;gBACnC,OAAO,QAAQ,KAAK;gBACpB,OAAO,QAAQ,UAAU;YAC7B;QACJ;QACA,OAAO;YAAE,MAAM;YAAe,IAAI;YAAW,MAAM;QAAO;QAC1D,SAAS;IACb;AACJ"}},
    {"offset": {"line": 3873, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}